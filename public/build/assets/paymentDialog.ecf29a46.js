import{d as Se,a as o,o as we,c as d,e as L,au as Ue,av as Ie,f as e,w as l,i as r,b8 as ae,p as N,y as O,s as v,j as te,l as g,m as c,n as s,aI as ue,t as V,E as f,q as k,a3 as p,z as _,a1 as G,k as $,b9 as Pe,B as oe,aJ as De,a9 as z,M as b,A as Ae,aF as Ne,aG as Re,C as R,D as h,aA as ne,U as he}from"./main.dc3150f2.js";import{_ as qe}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang.d9594284.js";import{V as se,a as Fe}from"./VTabs.8352486c.js";import{V as Te}from"./VFileInput.a98189c2.js";const q=F=>(Ne("data-v-cb07ec69"),F=F(),Re(),F),Be={key:2,class:"text-center"},Me=q(()=>b("h5",null,"OR",-1)),Ee={key:0,style:{"text-align":"center"}},Le={key:1,class:"circle-container",style:{"text-align":"center"}},Oe=q(()=>b("h5",{class:"text-center text-red"}," Proof of Payment* ",-1)),$e={class:"float-right"},ze={style:{"text-align":"center"}},je=q(()=>b("br",null,null,-1)),Je=q(()=>b("br",null,null,-1)),Qe=q(()=>b("h6",{class:"text-lg font-weight-large"},"Are you sure you want to Pay?",-1)),We={class:"text-center mt-5"},Ye={class:"float-right"},Ze=Se({__name:"paymentDialog",emits:["close","paymentData"],setup(F,{emit:H}){const de=JSON.parse(localStorage.getItem("clientData")||"{}"),j=o(),K=o(),T=JSON.parse(localStorage.getItem("accessToken")||"{}"),J=()=>{H("close")},Q=o(),W=o(),Y=o(),i=o(),w=o(),U=o(),C=o(),x=o(),y=o(null),B=o(null),I=o(!1),re=()=>{I.value=!0},P=o(!1),ie=()=>{P.value=!0},S=o(),ce=o(!1);function me(){var u;(u=K.value)==null||u.validate().then(({valid:a})=>{a?S.value="Step 2":D.value=!0})}function fe(){S.value="Step 1"}const ve=()=>{if(y.value&&y.value.files&&y.value.files.length>0){const u=y.value.files[0],a=new FileReader;a.onload=n=>{n.target&&typeof n.target.result=="string"&&(B.value=n.target.result)},a.readAsDataURL(u)}},M=o(!1),Z=o(!1),D=o(!1),pe=()=>{M.value=!0},X=()=>{M.value=!1},A=o(!1),_e=()=>{var u;(u=j.value)==null||u.validate().then(({valid:a})=>{a?A.value=!0:D.value=!0})},ge=()=>{var a;const u=new FormData;if(u.append("client_id",de[0].id),u.append("serviceName",w.value),u.append("mode_of_payment_id",i.value),u.append("amount",U.value),C.value!=null&&u.append("account_sender",C.value),i.value===1&&u.append("or_number",Q.value),i.value===2&&u.append("reference_number",W.value),u.append("date_of_payment",Y.value),((a=y.value)==null?void 0:a.files)&&y.value.files.length>0){const n=y.value.files[0];u.append("proofofpayment",n)}R.post(h.API_URL+"client/client/post-payment",u).then(n=>{n.data.success&&(H("paymentData",n.data),J())})},Ve=()=>{var u;pe(),(u=j.value)==null||u.validate().then(({valid:a})=>{a?(ge(),Z.value=!0,X(),A.value=!1):(D.value=!0,X())})},ee=o(),m=o(),be=()=>{R.get(h.API_URL+"client/client/get-mode-of-payment",{params:{token:T}}).then(u=>{if(u.data.success&&u.data.mode){const a=u.data.mode.map(n=>({item:n.name,value:n.id}));ee.value=a,ne(()=>{if(i.value!==null){const n=i.value;ye(n)}})}})},ye=u=>{R.get(h.API_URL+"client/client/get-mode-of-payment/"+u,{params:{token:T}}).then(a=>{a.data.success&&(m.value=a.data.mode[0],m.value&&"qr_code_image"in m.value&&i.value===2?x.value="/storage/qr_code_image/"+m.value.qr_code_image:x.value="/storage/qr_code_image/null")})},le=o(),E=o(),ke=()=>{R.get(h.API_URL+"client/client/get-services",{params:{token:T}}).then(u=>{if(u.data.success&&u.data.services){const a=u.data.services.map(n=>({item:n.name,value:n.id}));le.value=a,ne(()=>{if(w.value!==null){const n=w.value;xe(n)}})}})},xe=u=>{R.get(h.API_URL+"client/client/get-services/"+u,{params:{token:T}}).then(a=>{a.data.success&&(E.value=a.data.services[0],E.value&&"price"in E.value&&(U.value=E.value.price))})},Ce=()=>{be(),ke()};return we(()=>{Ce()}),(u,a)=>{const n=qe;return d(),L("section",null,[Ue(e(Fe,{modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=t=>S.value=t),class:"mt-5 mb-5"},{default:l(()=>[e(se,{value:"Step 1"},{default:l(()=>[r("Step 1")]),_:1}),e(se,{value:"Step 2"},{default:l(()=>[r(" Step 2")]),_:1})]),_:1},8,["modelValue"]),[[Ie,ce.value]]),e(Pe,{modelValue:S.value,"onUpdate:modelValue":a[11]||(a[11]=t=>S.value=t)},{default:l(()=>[e(ae,{value:"Step 1"},{default:l(()=>[e(N,{title:"Step 1","max-height":"520px",class:"d-flex flex-column flex-grow-1 overflow-auto"},{default:l(()=>[e(O),e(v(te),{ref_key:"refsubmit2",ref:K},{default:l(()=>[e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(s,{class:"mb-2"},{default:l(()=>[e(ue,{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=t=>w.value=t),rules:[v(V)],label:"Services",items:le.value,"item-title":"item","item-value":"value"},null,8,["modelValue","rules","items"])]),_:1}),U.value?(d(),f(s,{key:0,class:"mb-2"},{default:l(()=>[e(k,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=t=>U.value=t),readonly:"",label:"Amount"},null,8,["modelValue"])]),_:1})):p("",!0)]),_:1}),e(c,null,{default:l(()=>[e(s,{class:"mb-2"},{default:l(()=>[e(ue,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=t=>i.value=t),rules:[v(V)],label:"Mode Of Payment",items:ee.value,"item-title":"item","item-value":"value"},null,8,["modelValue","rules","items"])]),_:1})]),_:1}),e(c,null,{default:l(()=>[i.value==1?(d(),f(s,{key:0},{default:l(()=>[e(k,{modelValue:Q.value,"onUpdate:modelValue":a[4]||(a[4]=t=>Q.value=t),label:"O.R Number"},null,8,["modelValue"])]),_:1})):p("",!0),i.value==2?(d(),f(s,{key:1},{default:l(()=>[e(k,{modelValue:W.value,"onUpdate:modelValue":a[5]||(a[5]=t=>W.value=t),rules:[v(V)],label:"Referece Number"},null,8,["modelValue","rules"])]),_:1})):p("",!0),i.value>2&&m.value?(d(),f(s,{key:2},{default:l(()=>[m.value.account?(d(),f(k,{key:0,modelValue:m.value.account,"onUpdate:modelValue":a[6]||(a[6]=t=>m.value.account=t),rules:[v(V)],readonly:"",label:"Account Number",class:"mb-2"},null,8,["modelValue","rules"])):p("",!0),m.value.account?(d(),f(k,{key:1,modelValue:C.value,"onUpdate:modelValue":a[7]||(a[7]=t=>C.value=t),rules:[v(V)],type:"number",label:"Sender Account Number"},null,8,["modelValue","rules"])):(d(),L("h5",Be,"No Account Number"))]),_:1})):p("",!0)]),_:1}),i.value==2&&m.value?(d(),f(c,{key:0},{default:l(()=>[e(s,null,{default:l(()=>[e(k,{modelValue:C.value,"onUpdate:modelValue":a[8]||(a[8]=t=>C.value=t),rules:[v(V)],type:"number",label:"Sender Account Number"},null,8,["modelValue","rules"])]),_:1}),e(s,null,{default:l(()=>[e(k,{modelValue:m.value.account,"onUpdate:modelValue":a[9]||(a[9]=t=>m.value.account=t),rules:[v(V)],label:"Receiver Account Number"},null,8,["modelValue","rules"])]),_:1})]),_:1})):p("",!0),i.value===2&&x.value!=="/storage/qr_code_image/null"?(d(),f(c,{key:1},{default:l(()=>[e(s,{class:"mb-2 text-center"},{default:l(()=>[Me,e(_,{color:"blue",variant:"tonal","prepend-icon":"tabler:qrcode",size:"small",onClick:ie},{default:l(()=>[r(" QR Code")]),_:1})]),_:1})]),_:1})):p("",!0),i.value?(d(),f(c,{key:2,style:{"padding-left":"22%"}},{default:l(()=>[e(s,null,{default:l(()=>[x.value==="/storage/qr_code_image/null"?(d(),L("div",Ee)):(d(),L("div",Le,[e(G,{src:x.value,alt:"Uploaded Image",class:"circle-image",style:{display:"inline-block","max-width":"100%"}},null,8,["src"])]))]),_:1})]),_:1})):p("",!0)]),_:1}),e(O),e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(s,{class:"text-right"},{default:l(()=>[e(_,{class:"mr-1",onClick:$(me,["prevent"]),"append-icon":"tabler:arrow-forward"},{default:l(()=>[r("Next")]),_:1},8,["onClick"]),e(_,{color:"error",onClick:J,"prepend-icon":"material-symbols-light:tab-close-outline"},{default:l(()=>[r("Cancel")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),e(ae,{value:"Step 2"},{default:l(()=>[e(N,{title:"Step 2","max-height":"520px",class:"d-flex flex-column flex-grow-1 overflow-auto"},{default:l(()=>[e(O),e(v(te),{ref_key:"refsubmit",ref:j},{default:l(()=>[e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(s,{class:"mb-2"},{default:l(()=>[e(k,{modelValue:Y.value,"onUpdate:modelValue":a[10]||(a[10]=t=>Y.value=t),type:"date",label:"Date of Payment",rules:[v(V)]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(s,null,{default:l(()=>[Oe]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(s,{class:"mb-2"},{default:l(()=>[e(Te,{accept:".jpg,.jpeg,.png",ref_key:"fileInputImage",ref:y,chips:"",rules:[v(V)],label:"Select File",onChange:ve,"prepend-icon":"tabler:photo-plus"},null,8,["rules"])]),_:1})]),_:1}),e(c,{class:"text-center"},{default:l(()=>[B.value?(d(),f(s,{key:0},{default:l(()=>[e(_,{color:"blue",variant:"tonal","prepend-icon":"tabler:eye",size:"small",onClick:re},{default:l(()=>[r(" Click ME!")]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1}),e(O),e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(s,{class:"text-right"},{default:l(()=>[e(_,{color:"blue",class:"mr-1",onClick:$(fe,["prevent"]),"prepend-icon":"tabler:arrow-back"},{default:l(()=>[r("Back")]),_:1},8,["onClick"]),e(_,{class:"mr-1","prepend-icon":"material-symbols-light:payments-outline",onClick:$(_e,["prevent"])},{default:l(()=>[r("Submit")]),_:1},8,["onClick"]),e(_,{color:"error",onClick:J,"prepend-icon":"material-symbols-light:tab-close-outline"},{default:l(()=>[r("Cancel")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(oe,{modelValue:Z.value,"onUpdate:modelValue":a[12]||(a[12]=t=>Z.value=t),timeout:4e3,color:"success"},{default:l(()=>[r(" Success! Payment Added! ")]),_:1},8,["modelValue"]),e(oe,{modelValue:D.value,"onUpdate:modelValue":a[13]||(a[13]=t=>D.value=t),timeout:4e3,color:"error"},{default:l(()=>[r(" Erorr! Please Check Your Field! ")]),_:1},8,["modelValue"]),e(z,{modelValue:M.value,"onUpdate:modelValue":a[14]||(a[14]=t=>M.value=t),"max-width":"300"},{default:l(()=>[e(De)]),_:1},8,["modelValue"]),e(z,{modelValue:I.value,"onUpdate:modelValue":a[17]||(a[17]=t=>I.value=t),"max-width":"500"},{default:l(()=>[e(n,{onClick:a[15]||(a[15]=t=>I.value=!1)}),e(N,{title:"Preview",class:"d-flex flex-column flex-grow-1 overflow-auto"},{default:l(()=>[B.value?(d(),f(g,{key:0},{default:l(()=>[e(G,{class:"circle-image",src:B.value,alt:"Zoomed Image"},null,8,["src"])]),_:1})):p("",!0),e(g,null,{default:l(()=>[e(s,null,{default:l(()=>[b("div",$e,[e(_,{onClick:a[16]||(a[16]=t=>I.value=!1),color:"error"},{default:l(()=>[r("Close")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:A.value,"onUpdate:modelValue":a[19]||(a[19]=t=>A.value=t),"max-width":"540"},{default:l(()=>[e(N,{height:"330",flat:""},{default:l(()=>[e(g,null,{default:l(()=>[e(c,null,{default:l(()=>[e(s,{class:"text-center mt-10"},{default:l(()=>[b("div",ze,[e(Ae,{color:"warning",size:"110",icon:"bi:exclamation-circle"}),je,Je,Qe]),b("div",We,[e(_,{type:"submit",onClick:$(Ve,["prevent"]),color:"primary"},{default:l(()=>[r("Yes! Proceed")]),_:1},8,["onClick"]),r("\xA0 "),e(_,{onClick:a[18]||(a[18]=t=>A.value=!1),color:"error",variant:"tonal"},{default:l(()=>[r("Cancel")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:P.value,"onUpdate:modelValue":a[22]||(a[22]=t=>P.value=t),"max-width":"500"},{default:l(()=>[e(n,{onClick:a[20]||(a[20]=t=>P.value=!1)}),e(N,{title:"QR Code",class:"d-flex flex-column flex-grow-1 overflow-auto"},{default:l(()=>[x.value?(d(),f(g,{key:0},{default:l(()=>[e(G,{class:"circle-image",src:x.value,alt:"Zoomed Image"},null,8,["src"])]),_:1})):p("",!0),e(g,null,{default:l(()=>[e(s,null,{default:l(()=>[b("div",Ye,[e(_,{onClick:a[21]||(a[21]=t=>P.value=!1),color:"error"},{default:l(()=>[r("Close")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const el=he(Ze,[["__scopeId","data-v-cb07ec69"]]);export{el as default};
