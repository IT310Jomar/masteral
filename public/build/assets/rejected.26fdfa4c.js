import{d as le,a as n,aO as $,o as se,bM as oe,Z as ne,c as m,e as v,f as t,w as d,l as de,M as a,aZ as N,aI as ie,s,aD as g,S as ue,q as ce,bs as re,F as pe,G as me,W as V,i as I,z,k as L,A as S,a3 as j,a8 as ve,a4 as _e,a5 as fe,a6 as he,a1 as ge,bI as Ve,bH as xe,bt as ye,p as be,a9 as A,C as B,D as F,aF as Me,aG as ke,U as Re}from"./main.dc3150f2.js";import Ie from"./viewRequestsRejected.74c563eb.js";import we from"./reupload.4915a905.js";import{h as De}from"./moment.40bc58bf.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang.d9594284.js";import"./vue3-pdf-app.umd.bbeacf02.js";/* empty css             */import"./VFileInput.a98189c2.js";const C=x=>(Me("data-v-999c63ea"),x=x(),ke(),x),Se={class:"me-3",style:{display:"flex",width:"10.5rem","align-items":"center"}},je=C(()=>a("strong",null,"Show",-1)),Ce=C(()=>a("strong",null,"entries",-1)),Pe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},Ue={style:{display:"flex",width:"17rem","align-items":"center"}},qe=C(()=>a("thead",null,[a("tr",null,[a("th",{class:"text-center"},"No."),a("th",{class:"text-center"},"Date and Time of Requests"),a("th",{class:"text-center"},"Uploaded Journal"),a("th",{class:"text-center"},"Request Status"),a("th",{class:"text-center"},"Notes"),a("th",{class:"text-center"},"Action")])],-1)),Te={class:"text-center"},$e={class:"text-center"},Ne={class:"text-center"},ze={key:0,class:"tooltip"},Le={class:"text-center"},Ae={class:"text-center"},Be={class:"text-center"},Fe={key:0,class:"tooltip"},He={key:0},Ye={colspan:"8"},Je={style:{"text-align":"center"},class:"mb-5 mt-5"},Oe=le({__name:"rejected",setup(x){const c=n([]),H=n(),r=n(null),P=n(1),U=[5,20,50,100,500],_=n(U[0]);n(_.value);const y=n(P),w=n(_),q=JSON.parse(localStorage.getItem("accessToken")||"{}"),Y=$(()=>{const e=(P.value-1)*_.value,l=e+_.value;return c.value.slice(e,l)});let J=$(()=>c.value.length>0?Math.ceil(c.value.length/_.value):0);function O(){y.value=1}const T=JSON.parse(localStorage.getItem("clientData")||"{}"),D=()=>{B.get(F.API_URL+"client/client/get-journal-requested-list/"+T[0].id,{params:{token:q}}).then(e=>{e.data.success&&(c.value=e.data.rejected)})},b=n(null),E=e=>{b.value=e},G=e=>{b.value===e&&(b.value=null)},M=n(null),Z=e=>{M.value=e},Q=e=>{M.value===e&&(M.value=null)},W=()=>{D()};se(()=>{D()});const K=()=>{B.get(F.API_URL+"client/client/get-search-journal-requested-list/"+T[0].id,{params:{query:r.value,token:q}}).then(e=>{e.data.success&&(c.value=e.data.rejected)}).catch(e=>{console.log("Error")})},X=oe.exports.debounce(()=>{r.value===""?D():K()});ne([r],X);const f=n(!1),k=n(),ee=e=>{f.value=!0,k.value=e},h=n(!1),te=e=>{h.value=!0,k.value=e},R=n([]),ae=e=>{R.value[e]=!0,setTimeout(()=>{R.value[e]=!1},2e3)};return(e,l)=>(m(),v("section",null,[t(be,{title:"My Rejected Requests"},{default:d(()=>[t(de,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:d(()=>[a("div",Se,[t(N,{style:{"font-size":"small"},class:"mr-1"},{default:d(()=>[je]),_:1}),t(ie,{modelValue:s(w),"onUpdate:modelValue":[l[0]||(l[0]=o=>g(w)?w.value=o:null),O],items:U},null,8,["modelValue"]),t(N,{style:{"font-size":"small"},class:"ml-1"},{default:d(()=>[Ce]),_:1})]),t(ue),a("div",Pe,[a("div",Ue,[t(ce,{modelValue:s(r),"onUpdate:modelValue":l[1]||(l[1]=o=>g(r)?r.value=o:null),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),t(re,{ref_key:"tableRef",ref:H},{default:d(()=>{var o;return[qe,a("tbody",null,[(m(!0),v(pe,null,me(s(Y),(i,u)=>(m(),v("tr",{key:i.id},[a("td",Te,V(u+1),1),a("td",$e,V(s(De)(i.date_time_requests).format("MMMM DD, YYYY h:mm A")),1),a("td",Ne,[I(V(i.uploaded_file)+" ",1),t(z,{loading:s(R)[4],disabled:s(R)[4],color:"warning",onClick:[l[2]||(l[2]=p=>ae(4)),L(p=>te(i.id),["prevent"])],rounded:"pill",size:"small"},{default:d(()=>[t(S,{icon:"tabler-cloud-upload",size:"22",onMouseenter:p=>Z(u),onMouseleave:p=>Q(u)},null,8,["onMouseenter","onMouseleave"]),s(M)===u?(m(),v("span",ze,"Please Re-Upload")):j("",!0)]),_:2},1032,["loading","disabled","onClick"])]),a("td",Le,[t(ve,{color:"error",variant:"outlined"},{default:d(()=>[I(V(i==null?void 0:i.request_status),1)]),_:2},1024)]),a("td",Ae,V(i.notes),1),a("td",Be,[t(z,{icon:"",size:"x-small",variant:"text",class:"icon-container"},{default:d(()=>[t(S,{icon:"tabler-table-options",size:"22",onMouseenter:p=>E(u),onMouseleave:p=>G(u)},null,8,["onMouseenter","onMouseleave"]),s(b)===u?(m(),v("span",Fe,"Click Me")):j("",!0),t(_e,{activator:"parent"},{default:d(()=>[t(fe,null,{default:d(()=>[t(he,{onClick:L(p=>ee(i.id),["prevent"])},{default:d(()=>[t(S,null,{default:d(()=>[I("tabler:eye")]),_:1}),I(" View ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),((o=s(c))==null?void 0:o.length)==0?(m(),v("tfoot",He,[a("tr",null,[a("td",Ye,[a("div",Je,[t(ge,{src:s(Ve),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),t(xe,{color:"primary",indeterminate:"",reverse:""})])])])])):j("",!0)]}),_:1},512),t(ye,{length:s(J),modelValue:s(y),"onUpdate:modelValue":l[3]||(l[3]=o=>g(y)?y.value=o:null)},null,8,["length","modelValue"])]),_:1}),t(A,{scrollable:"",modelValue:s(f),"onUpdate:modelValue":l[5]||(l[5]=o=>g(f)?f.value=o:null),"max-width":"1000"},{default:d(()=>[t(Ie,{row:s(k),onClose:l[4]||(l[4]=o=>f.value=!1)},null,8,["row"])]),_:1},8,["modelValue"]),t(A,{modelValue:s(h),"onUpdate:modelValue":l[7]||(l[7]=o=>g(h)?h.value=o:null),"max-width":"450"},{default:d(()=>[t(we,{onClose:l[6]||(l[6]=o=>h.value=!1),row:s(k),onHandleData:W},null,8,["row"])]),_:1},8,["modelValue"])]))}});const tt=Re(Oe,[["__scopeId","data-v-999c63ea"]]);export{tt as default};
