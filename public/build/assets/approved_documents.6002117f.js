import{d as qe,a as r,aO as K,bM as Me,Z as Le,C as T,D as E,o as Te,c as m,e as y,f as e,w as o,l as Ee,M as s,aZ as ee,aI as Ue,S as te,z as A,k as U,s as c,bJ as ae,A as x,i,q as ze,bs as Oe,n as Re,a1 as se,F as Fe,G as $e,W as d,E as z,a8 as O,a3 as b,a4 as Ne,a5 as Ye,a6 as Be,bI as He,bH as We,bt as je,p as Ge,a9 as oe,bL as Je,aF as Xe,aG as Ze,U as Qe}from"./main.dc3150f2.js";import{h as le}from"./moment.40bc58bf.js";import{e as Ke}from"./excelPaidList.6a4350d3.js";import{E as et}from"./jspdf.plugin.autotable.5f00a359.js";import{_ as tt}from"./assignedPrintDialog.vue_vue_type_style_index_0_lang.930d56ae.js";import"./exceljs.min.6ef7067d.js";const C=V=>(Xe("data-v-6e7219fe"),V=V(),Ze(),V),at={class:"me-3",style:{display:"flex",width:"10.5rem","align-items":"center"}},st=C(()=>s("strong",null,"Show",-1)),ot=C(()=>s("strong",null,"entries",-1)),lt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},nt={style:{display:"flex",width:"17rem","align-items":"center"}},rt=C(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-center"},"No."),s("th",{class:"text-center"},"Client Fullname"),s("th",{class:"text-center"},"Date of Request"),s("th",{class:"text-center"},"Client Uploaded File"),s("th",{class:"text-center"},"Admin Status"),s("th",{class:"text-center"},"Action")])],-1)),it={class:"text-center"},dt={class:"text-center"},ct={class:"text-center"},ut=C(()=>s("br",null,null,-1)),mt={class:"text-center"},ft={class:"text-center"},pt={class:"text-center"},gt={key:0,class:"tooltip"},_t={key:0},ht={colspan:"8"},vt={style:{"text-align":"center"},class:"mb-5 mt-5"},yt=qe({__name:"approved_documents",setup(V){const D=JSON.parse(localStorage.getItem("editorData")||"null"),p=r([]),w=r(),g=r(),R=r(1),F=[5,20,50,100,500],_=r(F[0]);r(_.value);const I=r(R),h=r(),$=r(_);r(null),r(),r();const N=JSON.parse(localStorage.getItem("accessToken")||"{}"),Y=K(()=>{const l=(R.value-1)*_.value,a=l+_.value;return p.value.slice(l,a)});let ne=K(()=>p.value.length>0?Math.ceil(p.value.length/_.value):0);function re(){I.value=1}const ie=()=>{T.get(E.API_URL+"editor/editor/search-assigned-journal/"+D[0].id,{params:{query:g.value,token:N}}).then(l=>{l.data.success&&(p.value=l.data.searchAssigned)}).catch(l=>{console.log("Error")})},de=Me.exports.debounce(()=>{g.value===""?B():ie()});Le([g],de);const B=()=>{var l;T.get(E.API_URL+"editor/editor/get-assigned-editor/"+((l=D[0])==null?void 0:l.id),{params:{token:N}}).then(a=>{a.data.success&&(p.value=a.data.approveddata)})},ce=()=>{B()},S=r(!1),ue=()=>{S.value=!0},H=r(),me=async()=>{var l;await T.get(E.API_URL+"editor/editor/get-reset-pass-editor/"+((l=D[0])==null?void 0:l.id)).then(a=>{var t;a.data.success&&(H.value=(t=a.data.editor[0])==null?void 0:t.reset_password_status,H.value===1&&ue())})};Te(async()=>{await me(),ce()});const fe=()=>{h.value=!0,h.value==!0&&setTimeout(()=>{window.print()},1e3),window.addEventListener("beforeprint",()=>{}),window.addEventListener("afterprint",()=>{h.value=!1})};async function pe(l,a){try{const t=new et({orientation:"landscape",unit:"mm",format:"legal"}),f=[l][0].$el.querySelector("table"),k=f.querySelector("thead"),q=50,he=10,M=5,ve=0,ye=3,xe=q,be=M,Ve=40,W=40,Se="DIT.ADS- Assigned List Management Report",Pe=t.internal.pageSize.getWidth()/2;t.setFont("Georgia","bold"),t.text(Se,Pe,30,{align:"center"}),t.addImage(a,xe,be,Ve,W);const xt=t.internal.pageSize.getWidth()-q-he,bt=t.internal.pageSize.getHeight()-M-ve,j=[],Ae=[],G=f.querySelectorAll("tbody tr"),Ce=3;let De=0;G.forEach(u=>{const v=u.querySelectorAll("td")[Ce].querySelector("img");if(v){const L=v.getAttribute("src");j.push(new Promise(ke=>{const Q=new Image;Q.onload=function(){const St=q;De=u.offsetTop+M,Ae.push(this.src),ke()},Q.src=L}))}}),await Promise.all(j);const we=k.querySelectorAll("th"),J=Array.from(we).map(u=>u.innerText.trim()).filter(u=>u!=="Action"),X=[];G.forEach(u=>{const Z=u.querySelectorAll("td"),v=Array.from(Z).map(L=>L.innerText.trim());v.splice(ye,0),X.push(v)});const Ie=J.length+1;t.autoTable({head:[J],body:X,startY:W+10,margin:{top:5,right:10,bottom:5,left:10},styles:{cellPadding:2,fontSize:12},headStyles:{fillColor:"#00A36C",textColor:"#ffffff"},columnStyles:{[Ie-1]:{align:"center"}}}),t.save("Dit.Ads.pdf")}catch(t){console.error("Error generating PDF:",t)}}const P=r(null),ge=l=>{P.value=l},_e=l=>{P.value===l&&(P.value=null)};return(l,a)=>(m(),y("section",null,[e(Ge,{title:"Assigned Document List"},{default:o(()=>[e(Ee,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:o(()=>[s("div",at,[e(ee,{style:{"font-size":"small"},class:"mr-1"},{default:o(()=>[st]),_:1}),e(Ue,{modelValue:$.value,"onUpdate:modelValue":[a[0]||(a[0]=t=>$.value=t),re],items:F},null,8,["modelValue"]),e(ee,{style:{"font-size":"small"},class:"ml-1"},{default:o(()=>[ot]),_:1})]),e(te),e(A,{color:"error",onClick:a[1]||(a[1]=U(t=>pe(w.value,c(ae)),["prevent"]))},{default:o(()=>[e(x,null,{default:o(()=>[i("tabler:file-type-pdf")]),_:1})]),_:1}),e(A,{onClick:a[2]||(a[2]=U(t=>c(Ke)(w.value),["prevent"]))},{default:o(()=>[e(x,null,{default:o(()=>[i("tabler:file-spreadsheet")]),_:1})]),_:1}),e(A,{onClick:U(fe,["prevent"]),color:"warning"},{default:o(()=>[e(x,null,{default:o(()=>[i("tabler:printer")]),_:1})]),_:1},8,["onClick"]),e(te),s("div",lt,[s("div",nt,[e(ze,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=t=>g.value=t),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(Oe,{ref_key:"tableRef",ref:w},{default:o(()=>{var t;return[e(Re,{hidden:"",class:"mb-5"},{default:o(()=>[e(se,{src:c(ae),alt:"Dit.Ads Logo",class:"logo"},null,8,["src"])]),_:1}),rt,s("tbody",null,[(m(!0),y(Fe,null,$e(c(Y),(n,f)=>(m(),y("tr",{key:n.id},[s("td",it,d(f+1),1),s("td",dt,d(n.client.firstname)+" "+d(n.client.middlename)+" "+d(n.client.lastname),1),s("td",ct,[i(d(c(le)(n.date_time_requests).format("MMMM DD, YYYY"))+" ",1),ut,i(" "+d(c(le)(n.date_time_requests).format("hh:mm A")),1)]),s("td",mt,d(n.uploaded_file),1),s("td",ft,[n.request_status=="Approved"?(m(),z(O,{key:0,color:"success",variant:"outlined"},{default:o(()=>[i(d(n.request_status),1)]),_:2},1024)):b("",!0),n.request_status=="Pending"?(m(),z(O,{key:1,color:"warning",variant:"outlined"},{default:o(()=>[i(d(n.request_status),1)]),_:2},1024)):b("",!0),n.request_status=="Rejected"?(m(),z(O,{key:2,color:"error",variant:"outlined"},{default:o(()=>[i(d(n.request_status),1)]),_:2},1024)):b("",!0)]),s("td",pt,[e(A,{icon:"",size:"x-small",variant:"text",class:"icon-container"},{default:o(()=>[e(x,{icon:"tabler-table-options",size:"22",onMouseenter:k=>ge(f),onMouseleave:k=>_e(f)},null,8,["onMouseenter","onMouseleave"]),P.value===f?(m(),y("span",gt,"Click Me")):b("",!0),e(Ne,{activator:"parent"},{default:o(()=>[e(Ye,null,{default:o(()=>[e(Be,{to:"/editor/assigned-view/"+n.id},{default:o(()=>[e(x,null,{default:o(()=>[i("material-symbols:visibility-outline-rounded")]),_:1}),i(" View to Download ")]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),((t=p.value)==null?void 0:t.length)==0?(m(),y("tfoot",_t,[s("tr",null,[s("td",ht,[s("div",vt,[e(se,{src:c(He),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),e(We,{color:"primary",indeterminate:"",reverse:""})])])])])):b("",!0)]}),_:1},512),e(je,{length:c(ne),modelValue:I.value,"onUpdate:modelValue":a[4]||(a[4]=t=>I.value=t)},null,8,["length","modelValue"])]),_:1}),e(oe,{fullscreen:"",modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=t=>h.value=t),transition:"dialog-bottom-transition"},{default:o(()=>[e(tt,{Data:c(Y)},null,8,["Data"])]),_:1},8,["modelValue"]),e(oe,{modelValue:S.value,"onUpdate:modelValue":a[7]||(a[7]=t=>S.value=t),scrollable:"","max-width":"400",persistent:""},{default:o(()=>[e(Je,{onClose:a[6]||(a[6]=t=>S.value=!1)})]),_:1},8,["modelValue"])]))}});const kt=Qe(yt,[["__scopeId","data-v-6e7219fe"]]);export{kt as default};
