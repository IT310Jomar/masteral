import{d as F,$ as W,b as j,a as v,o as q,c as a,e as A,f as l,w as e,a0 as C,E as o,a1 as y,s as V,a2 as z,a3 as s,a4 as H,a5 as K,a6 as _,n as M,a7 as d,i as c,W as k,M as m,a8 as x,y as P,A as g,k as N,a9 as E,p as Q,l as X,m as Y,F as Z,aa as ee,C as le,D as ae}from"./main.dc3150f2.js";import{_ as te}from"./change_password.vue_vue_type_style_index_0_lang.f6979f95.js";import{V as oe,a as G}from"./VBadge.2d4e0ef5.js";const se=m("b",null,"God Mode",-1),ue=m("b",null,"Admin",-1),ne=m("b",null,"Editor",-1),re=m("b",null,"Client",-1),ie={key:0},de={style:{"text-align":"center"}},ce=m("br",null,null,-1),me=m("br",null,null,-1),fe=m("h6",{class:"text-lg font-weight-large",style:{color:"#f57c00"}},"Token Expired",-1),ve=m("p",{style:{color:"#757575"}},"Please wait to continue.",-1),ke=F({__name:"UserProfile",setup(_e){const T=W(),L=JSON.parse(localStorage.getItem("accessToken")||"null"),U=JSON.parse(localStorage.getItem("clientData")||"null"),B=JSON.parse(localStorage.getItem("editorData")||"null"),D=JSON.parse(localStorage.getItem("userData")||"null"),O=j(),p=v(),r=v(),t=v(),u=v(),n=v(),I=v(),h=v(!1),J=()=>{h.value=!0,I.value=D},w=v(!1),R=()=>{w.value=!0},S=()=>{localStorage.removeItem("userData"),localStorage.removeItem("accessToken"),localStorage.removeItem("userAbilities"),localStorage.removeItem("userRole"),localStorage.removeItem("clientData"),localStorage.removeItem("editorData"),T.update(ee),O.push("/login")},$=()=>{le.get(ae.API_URL+"auth/user-profile",{params:{token:L}}).then(b=>{if(b.data.success&&(p.value=b.data.dataUser,p)){const i=p.value.clientData,f=p.value.editorData;i&&i.length>0&&(n.value=i[0]),f&&f.length>0&&(u.value=f[0]),t.value=p.value,r.value=p.value}}).catch(b=>{console.log("error"),R(),setTimeout(()=>{location.reload(),S()},5e3)})};return q(()=>{$()}),(b,i)=>(a(),A(Z,null,[l(G,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",bordered:"",color:"success"},{default:e(()=>[l(C,{class:"cursor-pointer ml-2",color:"primary",variant:"tonal"},{default:e(()=>[r.value!==null||t.value!==null||n.value!==null||u.value!==null?(a(),o(C,{key:0},{default:e(()=>[r.value&&r.value.role==="God Mode"||t.value&&t.value.role==="Admin"?(a(),o(y,{key:0,src:V(z)},null,8,["src"])):n.value&&t.value.role==="Client"?(a(),o(y,{key:1,src:"/storage/profile_image/"+n.value.image},null,8,["src"])):u.value&&t.value.role==="Editor"?(a(),o(y,{key:2,src:"/storage/profile_image/"+u.value.image},null,8,["src"])):s("",!0)]),_:1})):s("",!0),l(H,{activator:"parent",width:"270",location:"bottom end",offset:"14px"},{default:e(()=>[l(K,null,{default:e(()=>[l(_,null,{prepend:e(()=>[l(oe,{start:""},{default:e(()=>[l(G,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[r.value!=null||t.value!=null||n.value!=null||u.value!=null?(a(),o(C,{key:0,color:"primary",variant:"tonal"},{default:e(()=>[t.value.role==="Admin"||r.value.role==="God Mode"?(a(),o(y,{key:0,src:V(z)},null,8,["src"])):s("",!0),n.value!=null?(a(),o(y,{key:1,src:"/storage/profile_image/"+n.value.image},null,8,["src"])):s("",!0),u.value!=null?(a(),o(y,{key:2,src:"/storage/profile_image/"+u.value.image},null,8,["src"])):s("",!0)]),_:1})):s("",!0)]),_:1})]),_:1})]),default:e(()=>[r.value!=null||t.value!=null||n.value!=null||u.value!=null?(a(),o(M,{key:0},{default:e(()=>[n.value!=null?(a(),o(d,{key:0,style:{"margin-left":"-8%","font-size":"15px"},class:"font-weight-semibold"},{default:e(()=>[c(k(n.value.firstname)+" "+k(n.value.lastname),1)]),_:1})):s("",!0),u.value!=null?(a(),o(d,{key:1,style:{"margin-left":"-8%","font-size":"15px"},class:"font-weight-semibold"},{default:e(()=>[c(k(u.value.firstname)+" "+k(u.value.lastname),1)]),_:1})):s("",!0),r.value.role==="God Mode"?(a(),o(d,{key:2,style:{"margin-left":"-8%","font-size":"15px"},class:"font-weight-semibold"},{default:e(()=>[c(k(r.value.name),1)]),_:1})):s("",!0),t.value.role==="Admin"?(a(),o(d,{key:3,style:{"margin-left":"-8%","font-size":"15px"},class:"font-weight-semibold"},{default:e(()=>[c(k(t.value.name),1)]),_:1})):s("",!0),m("span",null,[t.value.role==="God Mode"?(a(),o(x,{key:0,style:{"margin-left":"-8%"},color:"success"},{default:e(()=>[se]),_:1})):s("",!0),t.value.role==="Admin"?(a(),o(x,{key:1,style:{"margin-left":"-8%"},color:"success"},{default:e(()=>[ue]),_:1})):s("",!0),t.value.role==="Editor"?(a(),o(x,{key:2,style:{"margin-left":"-8%"},color:"success"},{default:e(()=>[ne]),_:1})):s("",!0),t.value.role==="Client"?(a(),o(x,{key:3,style:{"margin-left":"-8%"},color:"success"},{default:e(()=>[re]),_:1})):s("",!0)])]),_:1})):s("",!0)]),_:1}),l(P,{class:"my-2"}),r.value!=null||t.value!=null||n.value!=null||u.value!=null?(a(),A("div",ie,[t.value.role==="Client"?(a(),o(_,{key:0,link:"",to:"/client/profile/ViewProfile/"+V(U)[0].user_id},{prepend:e(()=>[l(g,{class:"me-2",icon:"tabler-user",size:"22"})]),default:e(()=>[l(d,null,{default:e(()=>[c("Profile")]),_:1})]),_:1},8,["to"])):s("",!0),t.value.role==="Editor"?(a(),o(_,{key:1,link:"",to:"/editor/profile/ViewProfile/"+V(B)[0].user_id},{prepend:e(()=>[l(g,{class:"me-2",icon:"tabler-user",size:"22"})]),default:e(()=>[l(d,null,{default:e(()=>[c("Profile")]),_:1})]),_:1},8,["to"])):s("",!0),t.value.role==="Admin"||t.value.role==="God Mode"?(a(),o(_,{key:2,link:"",to:"/admin/profile/ViewProfile/"+V(D).id},{prepend:e(()=>[l(g,{class:"me-2",icon:"tabler-user",size:"22"})]),default:e(()=>[l(d,null,{default:e(()=>[c("Profile")]),_:1})]),_:1},8,["to"])):s("",!0),t.value.role==="Admin"||t.value.role==="God Mode"?(a(),o(_,{key:3,to:{name:"admin-settings-tab",params:{tab:"maintenance"}}},{prepend:e(()=>[l(g,{class:"me-2",icon:"tabler-settings",size:"22"})]),default:e(()=>[l(d,null,{default:e(()=>[c("Settings")]),_:1})]),_:1})):s("",!0)])):s("",!0),r.value!=null||t.value!=null||n.value!=null||u.value!=null?(a(),o(_,{key:1,link:""},{prepend:e(()=>[l(g,{class:"me-2",icon:"material-symbols:lock-person-outline",size:"22"})]),default:e(()=>[l(d,{onClick:N(J,["prevent"])},{default:e(()=>[c("Change Password")]),_:1},8,["onClick"])]),_:1})):s("",!0),r.value!=null||t.value!=null||n.value!=null||u.value!=null?(a(),o(P,{key:2,class:"my-2"})):s("",!0),l(_,{to:"/login"},{prepend:e(()=>[l(g,{class:"me-2",icon:"tabler-logout",size:"22"})]),default:e(()=>[l(d,{onClick:N(S,["prevent"])},{default:e(()=>[c("Logout")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(E,{modelValue:h.value,"onUpdate:modelValue":i[1]||(i[1]=f=>h.value=f),scrollable:"","max-width":"500"},{default:e(()=>[l(te,{userid:I.value,onClose:i[0]||(i[0]=f=>h.value=!1)},null,8,["userid"])]),_:1},8,["modelValue"]),l(E,{modelValue:w.value,"onUpdate:modelValue":i[2]||(i[2]=f=>w.value=f),"max-width":"540",persistent:""},{default:e(()=>[l(Q,{height:"330",flat:""},{default:e(()=>[l(X,null,{default:e(()=>[l(Y,null,{default:e(()=>[l(M,{class:"text-center mt-10"},{default:e(()=>[m("div",de,[l(g,{color:"warning",size:"110",icon:"bi:exclamation-circle"}),ce,me,fe,ve])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{ke as _};
