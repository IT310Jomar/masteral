import{d as ie,a as i,aO as H,bM as ue,Z as ce,C as O,D as j,o as re,c as n,e as m,f as e,w as l,l as F,m as me,n as G,z as L,k as pe,i as u,M as a,aZ as Y,aI as _e,S as fe,q as ye,bs as ve,a1 as N,s as y,bJ as w,F as he,G as ge,W as c,E as r,a8 as v,a0 as xe,a3 as p,A as $,a4 as Ve,a5 as ke,a6 as J,bI as be,bH as Pe,bt as Ce,p as De,a9 as A,aF as Ie,aG as Me,U as Se}from"./main.dc3150f2.js";import Ne from"./edit_payment-dialog.1038c777.js";import Ae from"./paymentDialog.ecf29a46.js";import Ue from"./upload-dialog.317103d8.js";import Re from"./view_payment-dialog.1c0b458c.js";import{h as Le}from"./moment.40bc58bf.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang.d9594284.js";import"./VFileInput.a98189c2.js";import"./VTabs.8352486c.js";const x=V=>(Ie("data-v-d8409172"),V=V(),Me(),V),$e={class:"me-3",style:{width:"10.5rem",display:"flex","align-items":"center"}},Te=x(()=>a("strong",null,"Show",-1)),ze=x(()=>a("strong",null,"entries",-1)),Be={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},Ee={style:{width:"17rem",display:"flex","align-items":"center"}},He=x(()=>a("thead",null,[a("tr",null,[a("th",{class:"text-center"},"No."),a("th",{class:"text-center"},"Mode of Payment"),a("th",{class:"text-center"},"Amount"),a("th",{class:"text-center"},"Proof of Payment"),a("th",{class:"text-center"},"Sender Account Number"),a("th",{class:"text-center"},"Reference/O.R Number"),a("th",{class:"text-center"},"Date of Payment"),a("th",{class:"text-center"},"Status"),a("th",{class:"text-center"},"Action")])],-1)),Oe={class:"text-center"},je={class:"text-center"},Fe={class:"text-center"},Ge={class:"text-center"},Ye={class:"profile-card text-center mb-2"},we={class:"profile-card-photo"},Je={key:0,class:"text-center"},qe={key:1,class:"text-center"},Ze=x(()=>a("h5",null,"No Sender Account Number",-1)),Qe=[Ze],We={key:2,class:"text-center"},Ke={key:3,class:"text-center"},Xe={key:4,class:"text-center"},et=x(()=>a("h5",null,"No Reference/O.R Number",-1)),tt=[et],at={class:"text-center"},lt={class:"text-center"},st={class:"text-center"},nt={key:0,class:"tooltip"},ot={key:0},dt={colspan:"8"},it={style:{"text-align":"center"},class:"mb-5 mt-5"},ut=ie({__name:"payment",setup(V){const q=JSON.parse(localStorage.getItem("accessToken")||"{}"),Z=i(),h=i(null),T=i(1),z=[5,20,50,100,500],g=i(z[0]);i(g.value);const U=i(T);i();const B=i(g);i();const Q=H(()=>{const o=(T.value-1)*g.value,s=o+g.value;return f.value.slice(o,s)});let W=H(()=>f.value.length>0?Math.ceil(f.value.length/g.value):0);function K(){U.value=1}const X=()=>{O.get(j.API_URL+"client/client/search-payments/"+E[0].id,{params:{query:h.value}}).then(o=>{o.data.success&&(f.value=o.data.searchPayment)}).catch(o=>{console.log("Error")})},ee=ue.exports.debounce(()=>{h.value===""?R():X()});ce([h],ee);const k=i(null),te=o=>{k.value=o},ae=o=>{k.value===o&&(k.value=null)},b=i(!1),le=()=>{b.value=!0},P=i(!1),se=o=>{_.value=o,P.value=!0},C=i(!1),_=i(),ne=o=>{_.value=o,C.value=!0},D=i(!1),oe=o=>{_.value=o,D.value=!0},f=i([]),E=JSON.parse(localStorage.getItem("clientData")||"{}"),R=()=>{O.get(j.API_URL+"client/client/get-payment-list/"+E[0].id,{params:{token:q}}).then(o=>{o.data.success&&(f.value=o.data.paymentdata)})},I=()=>{R()},de=()=>{R()};return re(()=>{I()}),(o,s)=>(n(),m("section",null,[e(De,{title:"My Transaction List"},{default:l(()=>[e(F,null,{default:l(()=>[e(me,null,{default:l(()=>[e(G,{style:{"text-align":"right"}},{default:l(()=>[e(L,{onClick:pe(le,["prevent"]),"prepend-icon":"tabler-plus",color:"primary"},{default:l(()=>[u("Payment")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(F,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:l(()=>[a("div",$e,[e(Y,{style:{"font-size":"small"},class:"mr-1"},{default:l(()=>[Te]),_:1}),e(_e,{modelValue:B.value,"onUpdate:modelValue":[s[0]||(s[0]=d=>B.value=d),K],items:z},null,8,["modelValue"]),e(Y,{style:{"font-size":"small"},class:"ml-1"},{default:l(()=>[ze]),_:1})]),e(fe),a("div",Be,[a("div",Ee,[e(ye,{modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=d=>h.value=d),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(ve,{ref_key:"tableRef",ref:Z},{default:l(()=>{var d;return[e(G,{hidden:"",class:"mb-5"},{default:l(()=>[e(N,{src:y(w),alt:"Dit.Ads Logo",class:"logo"},null,8,["src"])]),_:1}),He,a("tbody",null,[(n(!0),m(he,null,ge(y(Q),(t,M)=>(n(),m("tr",{key:t.id},[a("td",Oe,c(M+1),1),a("td",je,[t.modeofpayment.name=="Cash"?(n(),r(v,{key:0,color:"red",variant:"tonal"},{default:l(()=>[u(c(t.modeofpayment.name),1)]),_:2},1024)):t.modeofpayment.name=="GCash"?(n(),r(v,{key:1,color:"blue",variant:"tonal"},{default:l(()=>[u(c(t.modeofpayment.name),1)]),_:2},1024)):(n(),r(v,{key:2,color:"success",variant:"tonal"},{default:l(()=>[u(c(t.modeofpayment.name),1)]),_:2},1024))]),a("td",Fe,"\u20B1"+c(t.amount)+".00",1),a("td",Ge,[a("div",Ye,[a("div",we,[e(xe,{class:"cursor-pointer",color:"primary",variant:"tonal",style:{width:"50px",height:"50px","margin-top":"5%","margin-bottom":"2%"}},{default:l(()=>[t.proof_of_payment?(n(),r(N,{key:0,src:"/storage/proofofpayment_image/"+t.proof_of_payment,alt:"Uploaded Image",style:{display:"inline-block","max-width":"100%"}},null,8,["src"])):(n(),r(N,{key:1,src:y(w),alt:"Uploaded Image",class:"circle-image",style:{display:"inline-block","max-width":"100%"}},null,8,["src"]))]),_:2},1024)])])]),t.account?(n(),m("td",Je,c(t.account),1)):(n(),m("td",qe,Qe)),t.modeofpayment.name=="Cash"?(n(),m("td",We,c(t.or_number),1)):t.modeofpayment.name=="GCash"?(n(),m("td",Ke,c(t.reference_number),1)):(n(),m("td",Xe,tt)),a("td",at,c(y(Le)(t.date_of_payment).format("MMMM DD, YYYY")),1),a("td",lt,[t.payment_status=="Approved"?(n(),r(v,{key:0,color:"success",variant:"outlined"},{default:l(()=>[u(c(t.payment_status),1)]),_:2},1024)):p("",!0),t.payment_status=="Pending"?(n(),r(v,{key:1,color:"warning",variant:"outlined"},{default:l(()=>[u(c(t.payment_status),1)]),_:2},1024)):p("",!0),t.payment_status=="Rejected"?(n(),r(v,{key:2,color:"error",variant:"outlined"},{default:l(()=>[u(c(t.payment_status),1)]),_:2},1024)):p("",!0)]),a("td",st,[t.payment_status=="Approved"&&t.upload_status=="No"?(n(),r(L,{key:0,onClick:S=>se(t),class:"mr-3",size:"x-small","prepend-icon":"tabler-plus"},{default:l(()=>[u("Upload")]),_:2},1032,["onClick"])):p("",!0),t.payment_status=="Approved"||t.payment_status=="Pending"||t.payment_status=="Rejected"?(n(),r(L,{key:1,icon:"",size:"x-small",variant:"text",class:"icon-container"},{default:l(()=>[e($,{icon:"tabler-table-options",size:"22",onMouseenter:S=>te(M),onMouseleave:S=>ae(M)},null,8,["onMouseenter","onMouseleave"]),k.value===M?(n(),m("span",nt,"Click Me")):p("",!0),e(Ve,{activator:"parent"},{default:l(()=>[e(ke,null,{default:l(()=>[e(J,{onClick:S=>ne(t)},{default:l(()=>[e($,null,{default:l(()=>[u("tabler:eye")]),_:1}),u(" View ")]),_:2},1032,["onClick"]),t.payment_status=="Approved"?(n(),r(J,{key:0,onClick:S=>oe(t)},{default:l(()=>[e($,null,{default:l(()=>[u("tabler-edit")]),_:1}),u(" Edit ")]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):p("",!0)])]))),128))]),((d=f.value)==null?void 0:d.length)==0?(n(),m("tfoot",ot,[a("tr",null,[a("td",dt,[a("div",it,[e(N,{src:y(be),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),e(Pe,{color:"primary",indeterminate:"",reverse:""})])])])])):p("",!0)]}),_:1},512),e(Ce,{length:y(W),modelValue:U.value,"onUpdate:modelValue":s[2]||(s[2]=d=>U.value=d)},null,8,["length","modelValue"])]),_:1}),e(A,{modelValue:b.value,"onUpdate:modelValue":s[4]||(s[4]=d=>b.value=d),"max-width":"580"},{default:l(()=>[e(Ae,{onClose:s[3]||(s[3]=d=>b.value=!1),onPaymentData:I})]),_:1},8,["modelValue"]),e(A,{modelValue:C.value,"onUpdate:modelValue":s[6]||(s[6]=d=>C.value=d),"max-width":"450"},{default:l(()=>[e(Re,{row:_.value,onClose:s[5]||(s[5]=d=>C.value=!1),onHandledata:I},null,8,["row"])]),_:1},8,["modelValue"]),e(A,{modelValue:D.value,"onUpdate:modelValue":s[8]||(s[8]=d=>D.value=d),"max-width":"450"},{default:l(()=>[e(Ne,{row:_.value,onClose:s[7]||(s[7]=d=>D.value=!1),onHandledata:I},null,8,["row"])]),_:1},8,["modelValue"]),e(A,{modelValue:P.value,"onUpdate:modelValue":s[10]||(s[10]=d=>P.value=d),"max-width":"650"},{default:l(()=>[e(Ue,{row:_.value,onClose:s[9]||(s[9]=d=>P.value=!1),onHandledata:de},null,8,["row"])]),_:1},8,["modelValue"])]))}});const gt=Se(ut,[["__scopeId","data-v-d8409172"]]);export{gt as default};
