import{d as U,b as A,$ as O,cp as b,cu as R,cv as J,cw as E,cx as M,cq as P,cr as T,a as s,Z as j,r as q,c as z,e as $,M as n,f as e,w as l,l as c,s as m,j as G,k as H,m as W,n as f,q as y,t as x,aH as Z,cy as K,i as g,y as k,z as h,p as w,B as Q,cz as X,a9 as S,A as Y,F as ee,C as ae,D as te,ct as I}from"./main.dc3150f2.js";const le={fluid:"",class:"d-flex align-center justify-center mb-3 float-center content"},oe=n("h5",{class:"text-h5 font-weight-semibold mb-1"},"Welcome! Editor\u{1F44B}\u{1F3FB}",-1),se=n("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),ne={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},re={style:{"text-align":"center"}},ie=n("h1",null,"Account is disabled. Cannot log in.",-1),ue={class:"float-right"},de=U({__name:"login-editor",setup(ce){const C=A(),D=O();b(M,E,J,R,!0),b(T,P);const u=s(!1),d=s(!1),v=s(),V=s(),p=s(!1),r=s(!1),i=s(!1),_=s();j(i,t=>{!t||setTimeout(()=>{i.value=!1},3e3)});const L=()=>{i.value=!0},F=()=>{ae.post(te.API_URL+"auth/login",{email:v.value,password:V.value}).then(t=>{t.data.success&&(localStorage.setItem("userAbilities",JSON.stringify(t.data.user.ability)),localStorage.setItem("userData",JSON.stringify(t.data.user)),localStorage.setItem("accessToken",JSON.stringify(t.data.access_token)),localStorage.setItem("userRole",JSON.stringify(t.data.user.role)),localStorage.setItem("clientData",JSON.stringify(t.data.user.clientData)),localStorage.setItem("editorData",JSON.stringify(t.data.user.editorData)),D.update(t.data.user.ability),console.log(t.data.user.ability),C.push({name:"index"}))}).catch(t=>{if(t.response){const a=t.response.data;a.error==="User not found"?(r.value=!0,console.log("Invalid Credentials error:",a.error)):a.error==="Account disabled"?d.value=!0:(r.value=!0,console.error("Error:",a.error))}})},B=()=>{var t;(t=_.value)==null||t.validate().then(({valid:a})=>{L(),a?F():r.value=!0})};return(t,a)=>{const N=q("RouterLink");return z(),$(ee,null,[n("section",le,[e(w,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:l(()=>[e(c,null,{default:l(()=>[oe,se]),_:1}),e(c,null,{default:l(()=>[e(m(G),{ref_key:"refVForm",ref:_,onSubmit:H(B,["prevent"])},{default:l(()=>[e(W,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(y,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=o=>v.value=o),label:"Email",type:"email",rules:[m(x),m(Z)]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(y,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=o=>V.value=o),label:"Password",rules:[m(x)],type:u.value?"text":"password","append-inner-icon":u.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=o=>u.value=!u.value)},null,8,["modelValue","rules","type","append-inner-icon"]),n("div",ne,[e(K,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=o=>p.value=o),label:"Remember me"},null,8,["modelValue"]),e(N,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:l(()=>[g(" Forgot Password? ")]),_:1})]),e(f,{cols:"12",class:"d-flex align-center"},{default:l(()=>[e(k),e(k)]),_:1}),e(h,{block:"",type:"submit"},{default:l(()=>[g(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),e(Q,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=o=>r.value=o),color:"error"},{default:l(()=>[g(" Invalid Credentials!! ")]),_:1},8,["modelValue"]),e(S,{modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=o=>i.value=o),"max-width":"300"},{default:l(()=>[e(X)]),_:1},8,["modelValue"]),e(S,{modelValue:d.value,"onUpdate:modelValue":a[7]||(a[7]=o=>d.value=o),"max-width":"500",persistent:""},{default:l(()=>[e(w,{height:"288"},{default:l(()=>[e(f,null,{default:l(()=>[e(c,null,{default:l(()=>[n("div",re,[e(Y,{color:"error",size:"80",icon:"mdi-information-outline"}),ie])]),_:1}),e(c,null,{default:l(()=>[n("div",ue,[e(h,{onClick:a[6]||(a[6]=o=>d.value=!1),color:"error"},{default:l(()=>[g("Ok!")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});typeof I=="function"&&I(de);export{de as default};
