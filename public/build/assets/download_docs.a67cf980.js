import{_ as te}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang.96f694d0.js";import{d as ae,a as o,aO as U,bM as le,Z as se,C as I,D as S,o as oe,c as i,e as m,f as e,w as a,l as j,m as ne,n as N,z,k as de,i as r,M as t,aZ as F,aI as ie,S as J,q as ce,bs as ue,a1 as B,s as f,bJ as re,F as _e,G as he,W as c,E as M,a8 as w,a3 as v,A as E,a4 as pe,a5 as me,a6 as fe,bI as ve,bH as ge,bt as be,p as Ve,aF as xe,aG as ye,U as Pe}from"./main.dc3150f2.js";import{h as ke}from"./moment.40bc58bf.js";import"./jspdf.plugin.autotable.5f00a359.js";const g=b=>(xe("data-v-24a60f50"),b=b(),ye(),b),De=g(()=>t("hr",{class:"mt-5"},null,-1)),Ie={class:"me-3",style:{display:"flex",width:"10.5rem","align-items":"center"}},Se=g(()=>t("strong",null,"Show",-1)),Me=g(()=>t("strong",null,"entries",-1)),we={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},Ce={style:{display:"flex",width:"17rem","align-items":"center"}},Le=g(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"No."),t("th",{class:"text-center"},"Editor Fullname"),t("th",{class:"text-center"},"Published File"),t("th",{class:"text-center"},"Status"),t("th",{class:"text-center"},"Date of Published"),t("th",{class:"text-center"},"Action")])],-1)),Ae={class:"text-center"},Re={class:"text-center"},Te={class:"text-center"},Ue={class:"text-center"},je={class:"text-center"},Ne=g(()=>t("br",null,null,-1)),ze={class:"text-center"},Fe={key:0,class:"tooltip"},Je={key:0},Be={colspan:"8"},Ee={style:{"text-align":"center"},class:"mb-5 mt-5"},Ye=ae({__name:"download_docs",setup(b){const P=JSON.parse(localStorage.getItem("accessToken")||"{}"),k=JSON.parse(localStorage.getItem("clientData")||"{}"),u=o([]),Y=o(),_=o(),C=o(1),L=[5,20,50,100,500],p=o(L[0]);o(p.value);const D=o(C);o();const A=o(p),h=o(null),O=o(),$=o(),q=U(()=>{const l=(C.value-1)*p.value,s=l+p.value;return u.value.slice(l,s)});let G=U(()=>u.value.length>0?Math.ceil(u.value.length/p.value):0);const R=()=>{if(h.value!=null){const l=[];l.push(h.value);const s=l[0].split(" to ");I.get(S.API_URL+"client/client/published-journal-list/range/"+k[0].id,{params:{startDate:O.value=s[0],endDate:$.value=s[1],token:P}}).then(x=>{x.data.success&&(h.value=null,u.value=x.data.publishedData)})}};function H(){D.value=1}const Z=()=>{I.get(S.API_URL+"client/client/search-published-journal/"+k[0].id,{params:{query:_.value,token:P}}).then(l=>{l.data.success&&(u.value=l.data.searchAllPublished)}).catch(l=>{console.log("Error")})},Q=le.exports.debounce(()=>{_.value===""?T():_.value&&h.value?R():Z()});se([_],Q);const T=()=>{I.get(S.API_URL+"client/client/get-published-journal/"+k[0].id,{params:{token:P}}).then(l=>{l.data.success&&(u.value=l.data.Allpublished)})},W=()=>{T()};oe(()=>{W()});const V=o(null),K=l=>{V.value=l},X=l=>{V.value===l&&(V.value=null)};return(l,s)=>{const x=te;return i(),m("section",null,[e(Ve,{title:"Published Journal List"},{default:a(()=>[e(j,null,{default:a(()=>[e(ne,null,{default:a(()=>[e(N,{cols:"6",offset:"2",style:{display:"flex","align-items":"center","margin-left":"25%"}},{default:a(()=>[e(x,{label:"Date Range",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=d=>h.value=d),config:{mode:"range"}},null,8,["modelValue"]),e(z,{color:"yellow",onClick:de(R,["prevent"]),class:"ml-2"},{default:a(()=>[r("Search")]),_:1},8,["onClick"])]),_:1})]),_:1}),De]),_:1}),e(j,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:a(()=>[t("div",Ie,[e(F,{style:{"font-size":"small"},class:"mr-1"},{default:a(()=>[Se]),_:1}),e(ie,{modelValue:A.value,"onUpdate:modelValue":[s[1]||(s[1]=d=>A.value=d),H],items:L},null,8,["modelValue"]),e(F,{style:{"font-size":"small"},class:"ml-1"},{default:a(()=>[Me]),_:1})]),e(J),e(J),t("div",we,[t("div",Ce,[e(ce,{modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=d=>_.value=d),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(ue,{ref_key:"tableRef",ref:Y},{default:a(()=>{var d;return[e(N,{hidden:"",class:"mb-5"},{default:a(()=>[e(B,{src:f(re),alt:"Dit.Ads Logo",class:"logo"},null,8,["src"])]),_:1}),Le,t("tbody",null,[(i(!0),m(_e,null,he(f(q),(n,y)=>(i(),m("tr",{key:n.id},[t("td",Ae,c(y+1),1),t("td",Re,c(n.editor.firstname)+" "+c(n.editor.middlename)+" "+c(n.editor.lastname),1),t("td",Te,c(n.editor_uploaded_file),1),t("td",Ue,[n.editor_status=="Approved"?(i(),M(w,{key:0,color:"blue",variant:"outlined"},{default:a(()=>[r("Published")]),_:1})):v("",!0),n.editor_status=="Pending"?(i(),M(w,{key:1,color:"warning",variant:"outlined"},{default:a(()=>[r(c(n.editor_status),1)]),_:2},1024)):v("",!0),n.editor_status=="Rejected"?(i(),M(w,{key:2,color:"error",variant:"outlined"},{default:a(()=>[r(c(n.editor_status),1)]),_:2},1024)):v("",!0)]),t("td",je,[r(c(f(ke)(n.updated_at).format("MMMM DD, YYYY"))+" ",1),Ne]),t("td",ze,[e(z,{icon:"",size:"x-small",variant:"text",class:"icon-container"},{default:a(()=>[e(E,{icon:"tabler-table-options",size:"22",onMouseenter:ee=>K(y),onMouseleave:ee=>X(y)},null,8,["onMouseenter","onMouseleave"]),V.value===y?(i(),m("span",Fe,"Click Me")):v("",!0),e(pe,{activator:"parent"},{default:a(()=>[e(me,null,{default:a(()=>[e(fe,{to:"/client/publish_journal/download-view/"+n.id},{default:a(()=>[e(E,null,{default:a(()=>[r("tabler-download")]),_:1}),r(" Download ")]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),((d=u.value)==null?void 0:d.length)==0?(i(),m("tfoot",Je,[t("tr",null,[t("td",Be,[t("div",Ee,[e(B,{src:f(ve),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),e(ge,{color:"primary",indeterminate:"",reverse:""})])])])])):v("",!0)]}),_:1},512),e(be,{length:f(G),modelValue:D.value,"onUpdate:modelValue":s[3]||(s[3]=d=>D.value=d)},null,8,["length","modelValue"])]),_:1})])}}});const He=Pe(Ye,[["__scopeId","data-v-24a60f50"]]);export{He as default};
