import{_ as j}from"./ErrorHeader.vue_vue_type_script_setup_true_lang.814619c2.js";import{d as q,cp as F,cq as U,cr as E,cA as Y,a as r,o as J,c as s,e as W,f as e,w as a,z as k,A as V,i as c,y as x,E as n,l as p,s as i,m as f,n as u,p as v,M as l,j as H,V as G,a0 as $,a1 as g,bJ as K,W as h,a3 as D,C as I,aF as Q,aG as X,D as Z,U as ee}from"./main.dc3150f2.js";import{V as ae}from"./vue3-pdf-app.umd.bbeacf02.js";/* empty css             */import{h as te}from"./moment.40bc58bf.js";import{p as oe}from"./401_error.6e3d3e3f.js";const M=_=>(Q("data-v-88aebab4"),_=_(),X(),_),le=M(()=>l("div",{class:"loading-container"},[l("div",{class:"loading-spinner"}),l("p",null,"Please Wait...")],-1)),se={style:{height:"80vh"}},re={class:"ml-3",style:{"font-size":"medium"}},ne=M(()=>l("h5",null,"Pulished Date",-1)),de={class:"misc-wrapper"},ie={class:"text-center",style:{"margin-bottom":"-2%"}},ue={class:"misc-avatar w-100 text-center"},ce=q({__name:"[id]",setup(_){const R=F(E,U),S=Y(),b=r(),T=JSON.parse(localStorage.getItem("clientData")||"{}"),B={sidebar:{viewThumbnail:!0,viewOutline:!1,viewAttachments:!1},secondaryToolbar:{secondaryPresentationMode:!0,secondaryOpenFile:!0,secondaryPrint:!0,secondaryDownload:!0,secondaryViewBookmark:!0,firstPage:!0,lastPage:!0,pageRotateCw:!0,pageRotateCcw:!0,cursorSelectTool:!0,cursorHandTool:!0,scrollVertical:!0,scrollHorizontal:!0,scrollWrapped:!0,spreadNone:!0,spreadOdd:!0,spreadEven:!0,documentProperties:!0},toolbar:{toolbarViewerLeft:{findbar:!0,previous:!0,next:!0,pageNumber:!0},toolbarViewerRight:{presentationMode:!0,openFile:!1,print:!1,download:!0,viewBookmark:!1},toolbarViewerMiddle:{zoomOut:!1,zoomIn:!1,scaleSelectContainer:!0}},errorWrapper:!1},t=r(),w=r(!0);r(!1),r(!1),r();const C=r(),z=JSON.parse(localStorage.getItem("accessToken")||"{}"),L=()=>{w.value=!0,I.get(Z.API_URL+"auth/admin/get-uploaded-journal/"+S.params.id,{params:{token:z}}).then(o=>{o.data.success&&(t.value=o.data.requestData[0],t.value&&"editor_uploaded_file"in t.value&&(b.value="/storage/published_journals/"+o.data.requestData[0].editor_uploaded_file,C.value=o.data.requestData[0].editor_uploaded_file))}).finally(()=>{w.value=!1}).catch(o=>{console.log("error")})},m=r([]),A=o=>{m.value[o]=!0,setTimeout(()=>{m.value[o]=!1},3e3)},N=async()=>{try{const o=await I.get(b.value,{responseType:"blob"});A(1);const y=window.URL.createObjectURL(new Blob([o.data])),d=document.createElement("a");d.href=y,d.setAttribute("download",C.value),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(y)}catch(o){console.error("Error downloading PDF:",o)}},O=()=>{L()};return J(()=>{O()}),(o,y)=>{const d=j;return s(),W("section",null,[e(v,{title:"Published Journal Information"},{default:a(()=>[e(k,{link:"",to:"/client/publish_journal/download_docs",class:"d-flex float-right mr-5",style:{"margin-top":"-5%"}},{default:a(()=>[e(V,{size:"large"},{default:a(()=>[c("tabler:arrow-back-up")]),_:1})]),_:1}),e(x,{class:"mt-2"}),w.value?(s(),n(p,{key:0},{default:a(()=>[le]),_:1})):t.value&&t.value.client_id===i(T)[0].id?(s(),n(p,{key:1},{default:a(()=>[e(f,null,{default:a(()=>[e(u,{cols:"8"},{default:a(()=>[e(v,null,{default:a(()=>[l("div",se,[e(i(ae),{style:{margin:"20px",padding:"10px"},pdf:b.value,config:B},null,8,["pdf"])])]),_:1})]),_:1}),t.value?(s(),n(u,{key:0,cols:"4"},{default:a(()=>[e(H,{ref:"refsubmit"},{default:a(()=>[e(v,null,{default:a(()=>[e(G,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(u,{xs:"12",md:"12"},{default:a(()=>[e(k,{loading:m.value[1],disabled:m.value[1],color:"success",variant:"flat",onClick:N},{default:a(()=>[e(V,{start:"",size:"16",icon:"tabler-download"}),c(" Download ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),t.value.request_status=="Approved"?(s(),n(v,{key:0,class:"mt-3",title:"Published By:"},{default:a(()=>[e(x),e(p,null,{default:a(()=>[e(f,null,{default:a(()=>[e(u,null,{default:a(()=>{var P;return[e($,{color:"primary",variant:"tonal"},{default:a(()=>[t.value.editor.image?(s(),n(g,{key:0,src:"/storage/profile_image/"+t.value.editor.image},null,8,["src"])):(s(),n(g,{key:1,src:i(K)},null,8,["src"]))]),_:1}),l("span",re,h(t.value.editor.firstname)+" "+h((P=t.value.editor)==null?void 0:P.middlename)+" "+h(t.value.editor.lastname),1)]}),_:1})]),_:1}),e(x,{class:"mb-5 mt-5"}),e(f,null,{default:a(()=>[e(u,null,{default:a(()=>[ne]),_:1})]),_:1}),t.value!=null?(s(),n(u,{key:0},{default:a(()=>[l("span",null,[e(V,null,{default:a(()=>[c("tabler-calendar")]),_:1}),c(" "+h(i(te)(t.value.date_of_published).format("MMMM DD, YYYY")),1)])]),_:1})):D("",!0)]),_:1})]),_:1})):D("",!0)]),_:1})):D("",!0)]),_:1})]),_:1})):(s(),n(p,{key:2},{default:a(()=>[l("div",de,[e(d,{"error-title":"You are not authorized! \u{1F510}","error-description":`You do not have permission to view this page using the credentials that you have provided while login.\r
      Please contact your site administrator.`}),l("div",ie,[e(k,{to:"/client/publish_journal/download_docs",class:"mb-12"},{default:a(()=>[c(" Back ")]),_:1})]),l("div",ue,[e(g,{src:i(oe),alt:"Coming Soon","max-width":590,class:"mx-auto"},null,8,["src"])]),e(g,{src:i(R),class:"misc-footer-img d-none d-md-block"},null,8,["src"])])]),_:1}))]),_:1})])}}});const he=ee(ce,[["__scopeId","data-v-88aebab4"]]);export{he as default};
