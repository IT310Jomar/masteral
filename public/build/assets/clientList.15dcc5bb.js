import{d as Se,a as i,aO as Y,bM as ke,Z as De,C as Z,D as Q,o as Ie,c as d,e as V,s as u,E as C,w as l,f as e,l as Ae,M as n,aZ as K,aI as Le,S as ee,z as A,k as w,bJ as te,A as f,i as r,q as Te,bs as Pe,n as we,a1 as le,F as Me,G as ze,W as c,a8 as ae,a3 as p,a4 as $e,a5 as Ee,a6 as M,bI as Ne,bH as Ue,bt as Fe,p as He,a9 as z,aF as Re,aG as qe,U as Be}from"./main.dc3150f2.js";import{e as Ge}from"./excellClient.3f24051c.js";import{_ as We}from"./active-dialog.vue_vue_type_script_setup_true_lang.674ad4f2.js";import{_ as Je}from"./disabled-dialog.vue_vue_type_script_setup_true_lang.be09f50b.js";import{E as Oe}from"./jspdf.plugin.autotable.5f00a359.js";import{_ as je}from"./clientPrintDialog.vue_vue_type_style_index_0_lang.dfa39b32.js";import"./exceljs.min.6ef7067d.js";const $=x=>(Re("data-v-b21622d7"),x=x(),qe(),x),Xe={class:"me-3",style:{display:"flex",width:"10.5rem","align-items":"center"}},Ye=$(()=>n("strong",null,"Show",-1)),Ze=$(()=>n("strong",null,"entries",-1)),Qe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},Ke={style:{display:"flex",width:"17rem","align-items":"center"}},et=$(()=>n("thead",null,[n("tr",null,[n("th",null,"No."),n("th",null,"Full Name"),n("th",null,"Email"),n("th",null,"Contact Number"),n("th",null,"Status"),n("th",null,"Action")])],-1)),tt={key:0,class:"tooltip"},lt={key:0},at={colspan:"8"},nt={style:{"text-align":"center"},class:"mb-5 mt-5"},st=Se({__name:"clientList",setup(x){const E=JSON.parse(localStorage.getItem("userRole")||"{}"),N=JSON.parse(localStorage.getItem("accessToken")||"{}"),v=i([]),L=i(),_=i(null),U=i(1),F=[5,20,50,100,500],h=i(F[0]);i(h.value);const T=i(U),b=i(),H=i(h),R=Y(()=>{const s=(U.value-1)*h.value,a=s+h.value;return v.value.slice(s,a)});let ne=Y(()=>v.value.length>0?Math.ceil(v.value.length/h.value):0);function se(){T.value=1}const oe=()=>{Z.get(Q.API_URL+"auth/admin/search-clients",{params:{query:_.value,token:N}}).then(s=>{s.data.success&&(v.value=s.data.searchClient)}).catch(s=>{console.log("Error")})},ie=ke.exports.debounce(()=>{_.value===""?P():oe()},300);De([_],ie);const P=()=>{Z.get(Q.API_URL+"auth/admin/get-all-clients",{params:{token:N}}).then(s=>{s.data.success&&(v.value=s.data.client)})};Ie(()=>{P()});const re=()=>{b.value=!0,b.value==!0&&setTimeout(()=>{window.print()},1e3),window.addEventListener("beforeprint",()=>{}),window.addEventListener("afterprint",()=>{b.value=!1})};async function de(s,a){try{const t=new Oe({orientation:"landscape",unit:"mm",format:"legal"}),m=[s][0].$el.querySelector("table"),I=m.querySelector("thead"),g=50,pe=10,W=5,ve=0,ge=g,J=W,_e=40,O=40,he="DIT.ADS- Client List Management Report",be=t.internal.pageSize.getWidth()/2;t.setFont("Georgia","bold"),t.text(he,be,30,{align:"center"}),t.addImage(a,"JPEG",ge,J,_e,O);const ot=t.internal.pageSize.getWidth()-g-pe,it=t.internal.pageSize.getHeight()-W-ve,j=I.querySelectorAll("th"),ye=Array.from(j).map(y=>y.innerText.trim()).filter(y=>y!=="Action"),Ve=m.querySelectorAll("tbody tr"),Ce=Array.from(Ve).map(y=>{const xe=y.querySelectorAll("td");return Array.from(xe).map(X=>j[X.cellIndex].innerText.trim()!=="Action"?X.innerText.trim():"")});t.autoTable({head:[ye],body:Ce,startY:J+O+10,margin:{top:5,right:10,bottom:5,left:10},styles:{cellPadding:2,fontSize:12},headStyles:{fillColor:"#00A36C",textColor:"#000000"}}),t.setFontSize(12),t.save("Dit.Ads.pdf")}catch(t){console.error("Error generating PDF:",t)}}const S=i(null),k=i(!1),D=i(!1),q=i(),B=i(),ue=s=>{k.value=!0,q.value=s},ce=s=>{D.value=!0,B.value=s},me=s=>{S.value=s},fe=s=>{S.value===s&&(S.value=null)},G=()=>{P()};return(s,a)=>(d(),V("section",null,[u(E)=="Admin"||u(E)=="God Mode"?(d(),C(He,{key:0,title:"Client List"},{default:l(()=>[e(Ae,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:l(()=>[n("div",Xe,[e(K,{style:{"font-size":"small"},class:"mr-1"},{default:l(()=>[Ye]),_:1}),e(Le,{modelValue:H.value,"onUpdate:modelValue":[a[0]||(a[0]=t=>H.value=t),se],items:F},null,8,["modelValue"]),e(K,{style:{"font-size":"small"},class:"ml-1"},{default:l(()=>[Ze]),_:1})]),e(ee),e(A,{color:"error",onClick:a[1]||(a[1]=w(t=>de(L.value,u(te)),["prevent"]))},{default:l(()=>[e(f,null,{default:l(()=>[r("tabler:file-type-pdf")]),_:1})]),_:1}),e(A,{onClick:a[2]||(a[2]=w(t=>u(Ge)(L.value),["prevent"]))},{default:l(()=>[e(f,null,{default:l(()=>[r("tabler:file-spreadsheet")]),_:1})]),_:1}),e(A,{onClick:w(re,["prevent"]),color:"warning"},{default:l(()=>[e(f,null,{default:l(()=>[r("tabler:printer")]),_:1})]),_:1},8,["onClick"]),e(ee),n("div",Qe,[n("div",Ke,[e(Te,{modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=t=>_.value=t),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(Pe,{ref_key:"tableRef",ref:L},{default:l(()=>{var t;return[e(we,{hidden:"",class:"mb-5"},{default:l(()=>[e(le,{src:u(te),alt:"Dit.Ads Logo",class:"logo"},null,8,["src"])]),_:1}),et,n("tbody",null,[(d(!0),V(Me,null,ze(u(R),(o,m)=>{var I;return d(),V("tr",{key:o.id},[n("td",null,c(m+1),1),n("td",null,c(o.firstname)+" "+c(o.middlename)+" "+c(o.lastname),1),n("td",null,c((I=o.users)==null?void 0:I.email),1),n("td",null,c(o.contact),1),n("td",null,[o.status!=null&&o.status=="Active"?(d(),C(ae,{key:0,color:"success",variant:"outlined",class:"font-weight-medium",size:"small"},{default:l(()=>[r(c(o.status),1)]),_:2},1024)):p("",!0),o.status!=null&&o.status=="Disabled"?(d(),C(ae,{key:1,color:"error",variant:"outlined",class:"font-weight-medium",size:"small"},{default:l(()=>[r(c(o.status),1)]),_:2},1024)):p("",!0)]),n("td",null,[e(A,{icon:"",size:"x-small",variant:"text",class:"icon-container"},{default:l(()=>[e(f,{icon:"tabler-table-options",size:"22",onMouseenter:g=>me(m),onMouseleave:g=>fe(m)},null,8,["onMouseenter","onMouseleave"]),S.value===m?(d(),V("span",tt,"Click Me")):p("",!0),e($e,{activator:"parent"},{default:l(()=>[e(Ee,null,{default:l(()=>[e(M,{to:"/admin/client/view/"+o.id},{default:l(()=>[e(f,null,{default:l(()=>[r("material-symbols:visibility-outline-rounded")]),_:1}),r(" View ")]),_:2},1032,["to"]),o.status=="Disabled"?(d(),C(M,{key:0,onClick:g=>ue(o.id)},{default:l(()=>[e(f,null,{default:l(()=>[r("material-symbols:interactive-space-outline")]),_:1}),r(" Active ")]),_:2},1032,["onClick"])):p("",!0),o.status=="Active"?(d(),C(M,{key:1,onClick:g=>ce(o.id)},{default:l(()=>[e(f,null,{default:l(()=>[r("ic:outline-person-add-disabled")]),_:1}),r(" Disabled ")]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])])}),128))]),((t=v.value)==null?void 0:t.length)==0?(d(),V("tfoot",lt,[n("tr",null,[n("td",at,[n("div",nt,[e(le,{src:u(Ne),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),e(Ue,{color:"primary",indeterminate:"",reverse:""})])])])])):p("",!0)]}),_:1},512),e(Fe,{length:u(ne),modelValue:T.value,"onUpdate:modelValue":a[4]||(a[4]=t=>T.value=t)},null,8,["length","modelValue"])]),_:1})):p("",!0),e(z,{fullscreen:"",modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=t=>b.value=t),transition:"dialog-bottom-transition"},{default:l(()=>[e(je,{Data:u(R)},null,8,["Data"])]),_:1},8,["modelValue"]),e(z,{modelValue:k.value,"onUpdate:modelValue":a[7]||(a[7]=t=>k.value=t),scrollable:"","max-width":"400"},{default:l(()=>[e(We,{onClose:a[6]||(a[6]=t=>k.value=!1),onHandledata:G,activeID:q.value},null,8,["activeID"])]),_:1},8,["modelValue"]),e(z,{modelValue:D.value,"onUpdate:modelValue":a[9]||(a[9]=t=>D.value=t),scrollable:"","max-width":"400"},{default:l(()=>[e(Je,{onClose:a[8]||(a[8]=t=>D.value=!1),onHandledata:G,disabledID:B.value},null,8,["disabledID"])]),_:1},8,["modelValue"])]))}});const gt=Be(st,[["__scopeId","data-v-b21622d7"]]);export{gt as default};
