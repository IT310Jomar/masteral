import{d as R,a as r,aA as D,aO as F,r as O,s as i,c as m,E as z,w as l,f as e,l as k,M as t,aI as C,aD as x,z as V,i as _,S as T,q,y as L,bs as M,A as d,e as g,F as G,G as Q,W as n,a0 as N,ac as A,a1 as W,a8 as j,a4 as H,a5 as J,a6 as w,a7 as y,au as K,av as X,bt as Y,p as Z,a3 as ee}from"./main.dc3150f2.js";import{u as te}from"./useInvoiceStore.b9825797.js";import{a as ae}from"./formatters.6aea8434.js";import{V as le}from"./VTooltip.a2b539db.js";const se={class:"d-flex align-center",style:{width:"135px"}},oe=t("span",{class:"text-no-wrap me-3"},"Show:",-1),ne={class:"me-3"},ie={class:"d-flex align-center flex-wrap gap-4"},ce={class:"invoice-list-filter"},re={class:"invoice-list-filter"},de={class:"text-uppercase"},ue=t("th",{scope:"col"}," #ID ",-1),pe={scope:"col",class:"text-center"},_e=t("th",{scope:"col"}," CLIENT ",-1),me=t("th",{scope:"col",class:"text-center"}," TOTAL ",-1),ve=t("th",{scope:"col"}," Issued Date ",-1),fe=t("th",{scope:"col",class:"text-center"}," BALANCE ",-1),he=t("th",{scope:"col"}," ACTIONS ",-1),xe={class:"text-center"},Ve={class:"mb-0"},be={class:"mb-0"},ge={class:"mb-0"},we={class:"d-flex align-center"},ye={key:1},Se={class:"d-flex flex-column"},Ie={class:"text-base font-weight-medium mb-0"},Pe={class:"text-disabled text-sm"},De={class:"text-center"},ze={class:"text-center"},ke={style:{width:"8rem"}},Ce=t("tr",null,[t("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),Te=[Ce],Le={class:"text-sm text-disabled"},Ue=R({__name:"index",setup(Ne){const B=te(),v=r(""),f=r(),u=r(10),c=r(1),h=r(1),S=r(0),p=r([]),I=r([]);D(()=>{B.fetchInvoices({q:v.value,status:f.value,perPage:u.value,currentPage:c.value}).then(s=>{p.value=s.data.invoices,h.value=s.data.totalPage,S.value=s.data.totalInvoices}).catch(s=>{console.log(s)})}),D(()=>{c.value>h.value&&(c.value=h.value)});const E=F(()=>{const s=p.value.length?(c.value-1)*u.value+1:0,o=p.value.length+(c.value-1)*u.value;return`Showing ${s} to ${o} of ${S.value} entries`}),P=(s,o)=>s===o?{status:"Unpaid",chip:{color:"error"}}:s===0?{status:"Paid",chip:{color:"success"}}:{status:s,chip:{variant:"text"}},b=s=>s==="Partial Payment"?{variant:"success",icon:"tabler-circle-half-2"}:s==="Paid"?{variant:"warning",icon:"tabler-chart-pie"}:s==="Downloaded"?{variant:"info",icon:"tabler-arrow-down-circle"}:s==="Draft"?{variant:"primary",icon:"tabler-device-floppy"}:s==="Sent"?{variant:"secondary",icon:"tabler-circle-check"}:s==="Past Due"?{variant:"error",icon:"tabler-alert-circle"}:{variant:"secondary",icon:"tabler-x"};return(s,o)=>{const $=O("RouterLink");return i(p)?(m(),z(Z,{key:0,id:"invoice-list"},{default:l(()=>[e(k,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[t("div",se,[oe,e(C,{modelValue:i(u),"onUpdate:modelValue":o[0]||(o[0]=a=>x(u)?u.value=a:null),density:"compact",items:[10,20,30,50]},null,8,["modelValue"])]),t("div",ne,[e(V,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:l(()=>[_(" Create invoice ")]),_:1})]),e(T),t("div",ie,[t("div",ce,[e(q,{modelValue:i(v),"onUpdate:modelValue":o[1]||(o[1]=a=>x(v)?v.value=a:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),t("div",re,[e(C,{modelValue:i(f),"onUpdate:modelValue":o[2]||(o[2]=a=>x(f)?f.value=a:null),label:"Select Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),e(L),e(M,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[t("thead",de,[t("tr",null,[ue,t("th",pe,[e(d,{icon:"tabler-trending-up"})]),_e,me,ve,fe,he])]),t("tbody",null,[(m(!0),g(G,null,Q(i(p),a=>(m(),g("tr",{key:a.id,style:{height:"3.75rem"}},[t("td",null,[e($,{to:{name:"apps-invoice-preview-id",params:{id:a.id}}},{default:l(()=>[_(" #"+n(a.id),1)]),_:2},1032,["to"])]),t("td",xe,[e(le,null,{activator:l(({props:U})=>[e(N,A({size:30},U,{color:b(a.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e(d,{size:20,icon:b(a.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[t("p",Ve,n(a.invoiceStatus),1),t("p",be," Balance: "+n(a.balance),1),t("p",ge," Due date: "+n(a.dueDate),1)]),_:2},1024)]),t("td",null,[t("div",we,[e(N,{size:"34",color:b(a.invoiceStatus).variant,variant:"tonal",class:"me-3"},{default:l(()=>[a.avatar.length?(m(),z(W,{key:0,src:a.avatar},null,8,["src"])):(m(),g("span",ye,n(i(ae)(a.client.name)),1))]),_:2},1032,["color"]),t("div",Se,[t("h6",Ie,n(a.client.name),1),t("span",Pe,n(a.client.companyEmail),1)])])]),t("td",De," $"+n(a.total),1),t("td",null,n(a.issuedDate),1),t("td",ze,[e(j,A({label:""},P(a.balance,a.total).chip,{size:"small"}),{default:l(()=>[_(n(P(a.balance,a.total).status),1)]),_:2},1040)]),t("td",ke,[e(V,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{icon:"tabler-mail",size:22})]),_:1}),e(V,{icon:"",variant:"text",color:"default",size:"x-small",to:{name:"apps-invoice-preview-id",params:{id:a.id}}},{default:l(()=>[e(d,{size:22,icon:"tabler-eye"})]),_:2},1032,["to"]),e(V,{icon:"",variant:"text",color:"default",size:"x-small"},{default:l(()=>[e(d,{size:22,icon:"tabler-dots-vertical"}),e(H,{activator:"parent"},{default:l(()=>[e(J,null,{default:l(()=>[e(w,{value:"download"},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-download"})]),default:l(()=>[e(y,null,{default:l(()=>[_("Download")]),_:1})]),_:1}),e(w,{to:{name:"apps-invoice-edit-id",params:{id:a.id}}},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-pencil"})]),default:l(()=>[e(y,null,{default:l(()=>[_("Edit")]),_:1})]),_:2},1032,["to"]),e(w,{value:"duplicate"},{prepend:l(()=>[e(d,{size:"24",class:"me-3",icon:"tabler-stack"})]),default:l(()=>[e(y,null,{default:l(()=>[_("Duplicate")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),K(t("tfoot",null,Te,512),[[X,!i(p).length]])]),_:1}),e(L),e(k,{class:"d-flex align-center flex-wrap gap-4 py-3"},{default:l(()=>[t("span",Le,n(i(E)),1),e(T),e(Y,{modelValue:i(c),"onUpdate:modelValue":o[3]||(o[3]=a=>x(c)?c.value=a:null),size:"small","total-visible":5,length:i(h),onNext:o[4]||(o[4]=a=>I.value=[]),onPrev:o[5]||(o[5]=a=>I.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1})):ee("",!0)}}});export{Ue as default};
