import{_ as Te}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang.96f694d0.js";import{d as ie,a as n,aq as Re,o as ce,aO as z,c2 as Be,c as b,e as w,f as e,w as a,aI as ue,s as f,aD as Me,n as W,F as de,C as T,D as R,bM as Ye,Z as Fe,l as ae,m as Oe,z as I,k as J,i as y,M as t,aZ as le,S as oe,bJ as ne,A as U,q as He,bs as Ee,a1 as re,G as Ue,W as h,E as N,a8 as q,a3 as L,bI as Ne,bH as qe,bt as ze,p as se,a9 as We,aF as Ge,aG as je,U as $e}from"./main.dc3150f2.js";import{h as Xe}from"./moment.40bc58bf.js";import{e as Ze}from"./excelPaidList.6a4350d3.js";import{E as Qe}from"./jspdf.plugin.autotable.5f00a359.js";import{_ as Ke}from"./publishedPrintDialog.vue_vue_type_style_index_0_lang.dbc392fe.js";import{L as et}from"./LineChart.b1e30a46.js";import"./exceljs.min.6ef7067d.js";const tt=ie({__name:"ChartJsLineChart",props:{colors:null},setup(S){const s=S,P=JSON.parse(localStorage.getItem("accessToken")||"{}"),o=n(),i=n(),A=Re(),v=async()=>{try{const m=await T.get(R.API_URL+"auth/get-school-type-data",{params:{year:p.value||(p.value=new Date().getFullYear()),token:P}});o.value=m.data.public,i.value=m.data.private,C()}catch(m){console.error("Error fetching data:",m)}},x=n();async function C(){x.value={labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{fill:!1,tension:.5,pointRadius:1,label:"Public School",pointHoverRadius:5,pointStyle:"circle",borderColor:s.colors.primary,backgroundColor:s.colors.primary,pointHoverBorderWidth:5,pointHoverBorderColor:s.colors.white,pointBorderColor:"transparent",pointHoverBackgroundColor:s.colors.primary,data:[o.value.January,o.value.February,o.value.March,o.value.April,o.value.May,o.value.June,o.value.July,o.value.August,o.value.September,o.value.October,o.value.November,o.value.December]},{fill:!1,tension:.5,label:"Private Scool",pointRadius:1,pointHoverRadius:5,pointStyle:"circle",borderColor:s.colors.warningShade,backgroundColor:s.colors.warningShade,pointHoverBorderWidth:5,pointHoverBorderColor:s.colors.white,pointBorderColor:"transparent",pointHoverBackgroundColor:s.colors.warningShade,data:[i.value.January,i.value.February,i.value.March,i.value.April,i.value.May,i.value.June,i.value.July,i.value.August,i.value.September,i.value.October,i.value.November,i.value.December]}]}}const V=n([]),p=n(null),B=()=>{const m=new Date().getFullYear();for(let g=m;g>=m-10;g--)V.value.push(g)};ce(async()=>{await v(),B()});const M=z(()=>Be(A.current.value));return(m,g)=>(b(),w(de,null,[e(W,{class:"text-left mr-6"},{default:a(()=>[e(ue,{modelValue:f(p),"onUpdate:modelValue":[g[0]||(g[0]=Y=>Me(p)?p.value=Y:null),v],items:f(V),label:"Select Year",solo:"",class:"ml-auto",style:{"max-width":"250px"},chips:""},null,8,["modelValue","items"])]),_:1}),e(f(et),{"chart-options":f(M),height:400,"chart-data":f(x)},null,8,["chart-options","chart-data"])],64))}}),k=S=>(Ge("data-v-fac6984e"),S=S(),je(),S),at=k(()=>t("hr",{class:"mt-5"},null,-1)),lt={class:"me-3",style:{display:"flex",width:"10.5rem","align-items":"center"}},ot=k(()=>t("strong",null,"Show",-1)),nt=k(()=>t("strong",null,"entries",-1)),rt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4 justify-end"},st={style:{display:"flex",width:"17rem","align-items":"center"}},it=k(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"No."),t("th",{class:"text-center"},"Editor Fullname"),t("th",{class:"text-center"},"Client Fullname"),t("th",{class:"text-center"},"Published File"),t("th",{class:"text-center"},"Status"),t("th",{class:"text-center"},"Date of Published")])],-1)),ct={class:"text-center"},ut={class:"text-center"},dt={class:"text-center"},ft={class:"text-center"},pt={class:"text-center"},mt={class:"text-center"},ht=k(()=>t("br",null,null,-1)),gt={key:0},vt={colspan:"8"},_t={style:{"text-align":"center"},class:"mb-5 mt-5"},yt=ie({__name:"publishedJournal",setup(S){JSON.parse(localStorage.getItem("editorData")||"null");const s=n([]),P=n(),o=n(),i=n(1),A=[5,20,50,100,500],v=n(A[0]);n(v.value);const x=n(i),C=n(),V=n(v),p=n(null),B=n(),M=n(),m=JSON.parse(localStorage.getItem("accessToken")||"{}"),g=z(()=>{const c=(i.value-1)*v.value,l=c+v.value;return s.value.slice(c,l)});let Y=z(()=>s.value.length>0?Math.ceil(s.value.length/v.value):0);const G=()=>{if(p.value!=null){const c=[];c.push(p.value);const l=c[0].split(" to ");T.get(R.API_URL+"auth/admin/published-journal-list/range",{params:{startDate:B.value=l[0],endDate:M.value=l[1],token:m}}).then(u=>{u.data.success&&(p.value=null,s.value=u.data.publishedData)})}};function fe(){x.value=1}const pe=()=>{T.get(R.API_URL+"auth/admin/search-all-published-journal",{params:{query:o.value,token:m}}).then(c=>{c.data.success&&(s.value=c.data.searchAllPublished)}).catch(c=>{console.log("Error")})},me=Ye.exports.debounce(()=>{o.value===""?j():o.value&&p.value?G():pe()});Fe([o],me);const j=()=>{T.get(R.API_URL+"auth/admin/get-all-published-journal",{params:{token:m}}).then(c=>{c.data.success&&(s.value=c.data.Allpublished)})},he=()=>{j()};ce(()=>{he()});const ge=()=>{C.value=!0,C.value==!0&&setTimeout(()=>{window.print()},1e3),window.addEventListener("beforeprint",()=>{}),window.addEventListener("afterprint",()=>{C.value=!1})};async function ve(c,l){try{const u=new Qe({orientation:"landscape",unit:"mm",format:"legal"}),r=[c][0].$el.querySelector("table"),F=r.querySelector("thead"),O=50,ye=10,H=5,be=0,Ce=3,Se=O,xe=H,Pe=40,$=40,Ve="DIT.ADS- Published Journal List Management Report",De=u.internal.pageSize.getWidth()/2;u.setFont("Georgia","bold"),u.text(Ve,De,30,{align:"center"}),u.addImage(l,Se,xe,Pe,$);const bt=u.internal.pageSize.getWidth()-O-ye,Ct=u.internal.pageSize.getHeight()-H-be,X=[],we=[],Z=r.querySelectorAll("tbody tr"),ke=3;let Ae=0;Z.forEach(_=>{const D=_.querySelectorAll("td")[ke].querySelector("img");if(D){const E=D.getAttribute("src");X.push(new Promise(Le=>{const te=new Image;te.onload=function(){const xt=O;Ae=_.offsetTop+H,we.push(this.src),Le()},te.src=E}))}}),await Promise.all(X);const Ie=F.querySelectorAll("th"),Q=Array.from(Ie).map(_=>_.innerText.trim()).filter(_=>_!=="Action"),K=[];Z.forEach(_=>{const ee=_.querySelectorAll("td"),D=Array.from(ee).map(E=>E.innerText.trim());D.splice(Ce,0),K.push(D)});const Je=Q.length+1;u.autoTable({head:[Q],body:K,startY:$+10,margin:{top:5,right:10,bottom:5,left:10},styles:{cellPadding:2,fontSize:12},headStyles:{fillColor:"#00A36C",textColor:"#ffffff"},columnStyles:{[Je-1]:{align:"center"}}}),u.save("Dit.Ads.pdf")}catch(u){console.error("Error generating PDF:",u)}}n(null);const _e={white:"#fff",yellow:"#ffe802",primary:"#836af9",areaChartBlue:"#2c9aff",barChartYellow:"#ffcf5c",polarChartGrey:"#4f5d70",polarChartInfo:"#ffb6c1",lineChartYellow:"#d4e157",polarChartGreen:"#28dac6",lineChartPrimary:"#9e69fd",lineChartWarning:"#ff9800",horizontalBarInfo:"#26c6da",polarChartWarning:"#ff8131",scatterChartGreen:"#28c76f",warningShade:"#ffbd1f",areaChartBlueLight:"#84d0ff",areaChartGreyLight:"#edf1f4",scatterChartWarning:"#ff9f43"};return(c,l)=>{const u=Te;return b(),w("section",null,[e(se,{title:"Published Journal List"},{default:a(()=>[e(ae,null,{default:a(()=>[e(Oe,null,{default:a(()=>[e(W,{cols:"6",offset:"2",style:{display:"flex","align-items":"center","margin-left":"25%"}},{default:a(()=>[e(u,{label:"Date Range",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=d=>p.value=d),config:{mode:"range"}},null,8,["modelValue"]),e(I,{color:"yellow",onClick:J(G,["prevent"]),class:"ml-2"},{default:a(()=>[y("Search")]),_:1},8,["onClick"])]),_:1})]),_:1}),at]),_:1}),e(ae,{class:"d-flex flex-wrap py-4 px-4 gap-2"},{default:a(()=>[t("div",lt,[e(le,{style:{"font-size":"small"},class:"mr-1"},{default:a(()=>[ot]),_:1}),e(ue,{modelValue:V.value,"onUpdate:modelValue":[l[1]||(l[1]=d=>V.value=d),fe],items:A},null,8,["modelValue"]),e(le,{style:{"font-size":"small"},class:"ml-1"},{default:a(()=>[nt]),_:1})]),e(oe),e(I,{color:"error",onClick:l[2]||(l[2]=J(d=>ve(P.value,f(ne)),["prevent"]))},{default:a(()=>[e(U,null,{default:a(()=>[y("tabler:file-type-pdf")]),_:1})]),_:1}),e(I,{onClick:l[3]||(l[3]=J(d=>f(Ze)(P.value),["prevent"]))},{default:a(()=>[e(U,null,{default:a(()=>[y("tabler:file-spreadsheet")]),_:1})]),_:1}),e(I,{onClick:J(ge,["prevent"]),color:"warning"},{default:a(()=>[e(U,null,{default:a(()=>[y("tabler:printer")]),_:1})]),_:1},8,["onClick"]),e(oe),t("div",rt,[t("div",st,[e(He,{modelValue:o.value,"onUpdate:modelValue":l[4]||(l[4]=d=>o.value=d),label:"Search",class:"search-field",solo:"","append-inner-icon":"mdi-magnify",density:"compact"},null,8,["modelValue"])])])]),_:1}),e(Ee,{ref_key:"tableRef",ref:P},{default:a(()=>{var d;return[e(W,{hidden:"",class:"mb-5"},{default:a(()=>[e(re,{src:f(ne),alt:"Dit.Ads Logo",class:"logo"},null,8,["src"])]),_:1}),it,t("tbody",null,[(b(!0),w(de,null,Ue(f(g),(r,F)=>(b(),w("tr",{key:r.id},[t("td",ct,h(F+1),1),t("td",ut,h(r.editor.firstname)+" "+h(r.editor.middlename)+" "+h(r.editor.lastname),1),t("td",dt,h(r.client.firstname)+" "+h(r.client.middlename)+" "+h(r.client.lastname),1),t("td",ft,h(r.editor_uploaded_file),1),t("td",pt,[r.editor_status=="Approved"?(b(),N(q,{key:0,color:"blue",variant:"outlined"},{default:a(()=>[y("Published")]),_:1})):L("",!0),r.editor_status=="Pending"?(b(),N(q,{key:1,color:"warning",variant:"outlined"},{default:a(()=>[y(h(r.editor_status),1)]),_:2},1024)):L("",!0),r.editor_status=="Rejected"?(b(),N(q,{key:2,color:"error",variant:"outlined"},{default:a(()=>[y(h(r.editor_status),1)]),_:2},1024)):L("",!0)]),t("td",mt,[y(h(f(Xe)(r.updated_at).format("MMMM DD, YYYY"))+" ",1),ht])]))),128))]),((d=s.value)==null?void 0:d.length)==0?(b(),w("tfoot",gt,[t("tr",null,[t("td",vt,[t("div",_t,[e(re,{src:f(Ne),style:{display:"inline-block","max-width":"100%",width:"35%",height:"55%","object-fit":"cover"}},null,8,["src"]),e(qe,{color:"primary",indeterminate:"",reverse:""})])])])])):L("",!0)]}),_:1},512),e(ze,{length:f(Y),modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=d=>x.value=d)},null,8,["length","modelValue"])]),_:1}),e(se,{class:"mt-4",title:"Type of School Statistics"},{default:a(()=>[e(tt,{colors:_e},null,8,["colors"])]),_:1}),e(We,{fullscreen:"",modelValue:C.value,"onUpdate:modelValue":l[6]||(l[6]=d=>C.value=d),transition:"dialog-bottom-transition"},{default:a(()=>[e(Ke,{Data:f(g)},null,8,["Data"])]),_:1},8,["modelValue"])])}}});const Lt=$e(yt,[["__scopeId","data-v-fac6984e"]]);export{Lt as default};
