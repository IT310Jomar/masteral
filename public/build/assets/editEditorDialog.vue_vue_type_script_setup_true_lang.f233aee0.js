import{d as T,a as d,o as $,c as h,e as F,f as e,w as a,ay as N,i as n,y as _,s as g,j as R,k as C,l as k,m as S,n as w,aI as J,t as L,z as x,p as M,B as E,A as P,aJ as j,a9 as q,C as b,D}from"./main.dc3150f2.js";import{_ as z}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang.d9594284.js";const H=T({__name:"editEditorDialog",props:["row","dataId"],emits:["close","editedData"],setup(U,{emit:V}){const i=U,y=JSON.parse(localStorage.getItem("accessToken")||"{}"),v=d(),m=d(!1),c=d(!1),u=d(),r=d(!1);function f(){V("close")}const p=d(),B=()=>{b.get(D.API_URL+"auth/admin/editors",{params:{token:y}}).then(o=>{if(o.data.success){const t=o.data.editor.map(s=>{var l;return{name:`${s.firstname} ${(l=s.middlename)!=null?l:""} ${s.lastname}`,id:s.id}});i.dataId!=null&&(u.value=i.dataId),p.value=t}})},I=()=>{var o;(o=v.value)==null||o.validate().then(({valid:t})=>{t?A():m.value=!0})},A=()=>{r.value=!0,b.put(D.API_URL+"auth/admin/edit-assigned-editor/"+i.row,{editor:u.value}).then(o=>{o.data.success&&(V("editedData",o.data),c.value=!0,r.value=!1,f())})};return $(()=>{B()}),(o,t)=>{const s=z;return h(),F("section",null,[e(s,{onClick:f}),e(M,null,{default:a(()=>[e(N,null,{default:a(()=>[n("Edit Editor")]),_:1}),e(_),e(g(R),{ref_key:"refVForm",ref:v,onSubmit:C(I,["prevent"])},{default:a(()=>[e(k,null,{default:a(()=>[e(S,null,{default:a(()=>[e(w,null,{default:a(()=>[e(J,{items:p.value,"item-title":"name","item-value":"id",label:"Select Editor",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),rules:[g(L)]},null,8,["items","modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(_),e(k,null,{default:a(()=>[e(S,null,{default:a(()=>[e(w,{class:"text-right"},{default:a(()=>[e(x,{class:"mr-1",color:"warning",type:"submit"},{default:a(()=>[n("Update")]),_:1}),e(x,{variant:"tonal",onClick:C(f,["prevent"]),color:"error"},{default:a(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(E,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=l=>m.value=l),color:"error",timeout:"4000",variant:"flat"},{default:a(()=>[n(" Error!! ")]),_:1},8,["modelValue"]),e(E,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=l=>c.value=l),timeout:4e3,variant:"flat",color:"primary"},{default:a(()=>[e(P,null,{default:a(()=>[n("tabler:discount-check")]),_:1}),n("\xA0 Success!! ")]),_:1},8,["modelValue"]),e(q,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value=l),"max-width":"300"},{default:a(()=>[e(j)]),_:1},8,["modelValue"])])}}});export{H as _};
