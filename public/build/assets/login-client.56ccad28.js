import{d as R,b as U,$ as A,cp as y,cu as O,cv as J,cw as M,cx as P,cq as T,cr as j,a as o,Z as q,r as z,c as E,e as $,M as n,f as e,w as t,l as f,s as g,j as G,k as H,m as W,n as d,q as x,t as h,aH as Z,cy as K,i as c,y as k,z as w,p as S,B as Q,cz as X,a9 as C,A as Y,F as ee,C as ae,D as te,ct as I}from"./main.dc3150f2.js";const le={fluid:"",class:"d-flex align-center justify-center mb-3 float-center content"},se=n("h5",{class:"text-h5 font-weight-semibold mb-1"},"Welcome! Client\u{1F44B}\u{1F3FB}",-1),oe=n("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),ne={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},re=n("span",null,"Register",-1),ie={style:{"text-align":"center"}},ue=n("h1",null,"Account is disabled. Cannot log in.",-1),de={class:"float-right"},ce=R({__name:"login-client",setup(me){const D=U(),L=A();y(P,M,J,O,!0),y(j,T);const m=o(!1),r=o(!1),v=o(),V=o(),p=o(!1),i=o(!1),u=o(!1),_=o();q(u,l=>{!l||setTimeout(()=>{u.value=!1},3e3)});const F=()=>{u.value=!0},B=()=>{ae.post(te.API_URL+"auth/login",{email:v.value,password:V.value}).then(l=>{l.data.success?(localStorage.setItem("userAbilities",JSON.stringify(l.data.user.ability)),localStorage.setItem("userData",JSON.stringify(l.data.user)),localStorage.setItem("accessToken",JSON.stringify(l.data.access_token)),localStorage.setItem("userRole",JSON.stringify(l.data.user.role)),localStorage.setItem("clientData",JSON.stringify(l.data.user.clientData)),localStorage.setItem("editorData",JSON.stringify(l.data.user.editorData)),L.update(l.data.user.ability),console.log(l.data.user.role),D.push({name:"index"})):r.value=!0}).catch(l=>{if(l.response){const a=l.response.data;a.error==="User not found"?(i.value=!0,console.log("Invalid Credentials error:",a.error)):a.error==="Account disabled"?r.value=!0:(i.value=!0,console.error("Error:",a.error))}})},N=()=>{var l;(l=_.value)==null||l.validate().then(({valid:a})=>{F(),a?B():i.value=!0})};return(l,a)=>{const b=z("RouterLink");return E(),$(ee,null,[n("section",le,[e(S,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[e(f,null,{default:t(()=>[se,oe]),_:1}),e(f,null,{default:t(()=>[e(g(G),{ref_key:"refVForm",ref:_,onSubmit:H(N,["prevent"])},{default:t(()=>[e(W,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(x,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),label:"Email",type:"email",rules:[g(h),g(Z)]},null,8,["modelValue","rules"])]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(x,{modelValue:V.value,"onUpdate:modelValue":a[1]||(a[1]=s=>V.value=s),label:"Password",rules:[g(h)],type:m.value?"text":"password","append-inner-icon":m.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=s=>m.value=!m.value)},null,8,["modelValue","rules","type","append-inner-icon"]),n("div",ne,[e(K,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=s=>p.value=s),label:"Remember me"},null,8,["modelValue"]),e(b,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:t(()=>[c(" Forgot Password? ")]),_:1})]),e(d,{cols:"12",class:"d-flex align-center"},{default:t(()=>[e(k),e(k)]),_:1}),e(w,{block:"",type:"submit"},{default:t(()=>[c(" Login ")]),_:1})]),_:1}),e(d,{cols:"12",class:"text-center"},{default:t(()=>[re,e(b,{class:"text-primary ms-2",to:{name:"register"}},{default:t(()=>[c(" Create an account ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),e(Q,{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=s=>i.value=s),color:"error"},{default:t(()=>[c(" Invalid Credentials!! ")]),_:1},8,["modelValue"]),e(C,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=s=>u.value=s),"max-width":"300"},{default:t(()=>[e(X)]),_:1},8,["modelValue"]),e(C,{modelValue:r.value,"onUpdate:modelValue":a[7]||(a[7]=s=>r.value=s),"max-width":"500",persistent:""},{default:t(()=>[e(S,{height:"288"},{default:t(()=>[e(d,null,{default:t(()=>[e(f,null,{default:t(()=>[n("div",ie,[e(Y,{color:"error",size:"80",icon:"tabler-info-octagon"}),ue])]),_:1}),e(f,null,{default:t(()=>[n("div",de,[e(w,{onClick:a[6]||(a[6]=s=>r.value=!1),variant:"tonal",color:"error"},{default:t(()=>[c("Ok!")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});typeof I=="function"&&I(ce);export{ce as default};
