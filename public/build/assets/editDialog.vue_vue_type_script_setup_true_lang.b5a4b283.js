import{_ as ce}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang.d9594284.js";import{d as fe,a as r,o as pe,c as B,e as ve,f as e,w as a,n as s,p as Ve,y as L,E as K,l as w,s as i,j as Q,k as W,m as d,M as F,a0 as X,a1 as Z,q as c,t as p,aH as ee,aI as _e,z as T,i as g,A as le,a3 as ae,B as te,aJ as ge,a9 as be,C as M,D as R}from"./main.dc3150f2.js";import{V as ue}from"./VFileInput.a98189c2.js";const ye={class:"profile-card text-center mb-2"},De={class:"profile-card-photo"},he={class:"profile-card text-center mb-2"},Ue={class:"profile-card-photo"},xe=fe({__name:"editDialog",props:["clientData","editorData"],emits:["close","handledata"],setup(oe,{emit:b}){const n=oe,S=r(),k=r(!1),x=r(!1),I=r(!1);r(!1);const v=r(),V=r(),y=r(),D=r(),f=r(),_=r(),h=r(),U=r(),C=r(),j=()=>{k.value=!0},N=()=>{k.value=!1},P=t=>/^[0-9]*$/.test(t)||"Only numbers are allowed.",E=r(null),m=r(null),$=()=>{if(m.value&&m.value.files&&m.value.files.length>0){const t=m.value.files[0],l=new FileReader;l.onload=o=>{o.target&&typeof o.target.result=="string"&&(E.value=o.target.result)},l.readAsDataURL(t)}},ne=()=>{var l;const t=new FormData;if(t.append("client_id",n.clientData.user_id),t.append("email",_.value),t.append("firstname",v.value),t.append("lastname",V.value),y.value!==null&&t.append("middlename",y.value),f.value!==null&&t.append("contact_number",f.value),h.value!==null&&t.append("schoolname",h.value),U.value!==null&&t.append("school_type",U.value),C.value!==null&&t.append("course",C.value),((l=m.value)==null?void 0:l.files)&&m.value.files.length>0){const o=m.value.files[0];t.append("image",o)}M.post(R.API_URL+`auth/admin/client-upload-profile/${n.clientData.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.data.success&&(b("close"),b("handledata",o.data))}).catch(o=>{if(o.response){const u=o.response.data.message;alert(u)}else console.error("An error occurred:",o.message)})},se=()=>{var l;const t=new FormData;if(t.append("editor_id",n.editorData.user_id),t.append("email",_.value),t.append("firstname",v.value),t.append("lastname",V.value),D.value!==null&&t.append("middlename",D.value),t.append("contact_number",f.value),((l=m.value)==null?void 0:l.files)&&m.value.files.length>0){const o=m.value.files[0];t.append("image",o)}M.post(R.API_URL+`auth/admin/editor-upload-profile/${n.editorData.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.data.success&&(b("close"),b("handledata",o.data))}).catch(o=>{if(o.response){const u=o.response.data.message;alert(u)}else console.error("An error occurred:",o.message)})},de=()=>{var t;j(),(t=S.value)==null||t.validate().then(({valid:l})=>{l?(ne(),x.value=!0,N()):(I.value=!0,N())})},re=()=>{var t;j(),(t=S.value)==null||t.validate().then(({valid:l})=>{l?(se(),x.value=!0,N()):(I.value=!0,N())})},A=()=>{b("close")},ie=JSON.parse(localStorage.getItem("accessToken")||"{}"),O=r(),me=()=>{M.get(R.API_URL+"auth/admin/get-school-type",{params:{token:ie}}).then(t=>{if(t.data.success&&t.data.types){const o=[];for(var l=0;l<t.data.types.length;l++){const u={item:t.data.types[l].name,value:t.data.types[l].id};o.push(u)}O.value=o}})};return pe(()=>{var t,l,o,u,q,H,J,Y,z,G;n.clientData!=null&&(v.value=(t=n.clientData)==null?void 0:t.firstname,V.value=(l=n.clientData)==null?void 0:l.lastname,y.value=n.clientData.middlename,f.value=(o=n.clientData)==null?void 0:o.contact,_.value=(u=n.clientData)==null?void 0:u.users.email,h.value=(q=n.clientData)==null?void 0:q.school,U.value=n.clientData.school_type_id,C.value=(H=n.clientData)==null?void 0:H.course),n.editorData!=null&&(v.value=(J=n.editorData)==null?void 0:J.firstname,V.value=(Y=n.editorData)==null?void 0:Y.lastname,D.value=n.editorData.middlename,f.value=(z=n.editorData)==null?void 0:z.contact,_.value=(G=n.editorData)==null?void 0:G.users.email),me()}),(t,l)=>{const o=ce;return B(),ve("section",null,[e(o,{onClick:A}),e(d,null,{default:a(()=>[e(s,null,{default:a(()=>[e(Ve,{height:"520px",class:"d-flex flex-column flex-grow-1 overflow-auto",title:"Edit Your Profile"},{default:a(()=>[e(L,{class:"mt-4"}),n.clientData!=null?(B(),K(w,{key:0},{default:a(()=>[e(i(Q),{ref_key:"refsubmit",ref:S,onSubmit:W(de,["prevent"])},{default:a(()=>[e(d,null,{default:a(()=>[e(w,null,{default:a(()=>[F("div",ye,[F("div",De,[e(s,null,{default:a(()=>[e(X,{class:"cursor-pointer",color:"primary",variant:"tonal",style:{width:"200px",height:"200px","margin-top":"-5%","margin-bottom":"3%"}},{default:a(()=>[e(Z,{src:E.value,alt:"Uploaded Image",class:"circle-image"},null,8,["src"])]),_:1})]),_:1})])]),e(d,null,{default:a(()=>[e(s,null,{default:a(()=>[e(ue,{ref_key:"fileInput",ref:m,onChange:$,label:"Select File",accept:".jpg,.jpeg,.png"},null,512)]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=u=>v.value=u),label:"First Name"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=u=>y.value=u),label:"Middle Name"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=u=>V.value=u),label:"Last Name"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{sm:"3.5",md:"3.5",class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p),P,()=>f.value.length<11&&"Invalid Contact Number."],modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=u=>f.value=u),label:"Contact Number"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=u=>_.value=u),rules:[i(p),i(ee)],label:"Email",type:"email",readonly:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=u=>h.value=u),label:"School"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(_e,{modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=u=>U.value=u),rules:[i(p)],label:"School Type",items:O.value,"item-title":"item","item-value":"value"},null,8,["modelValue","rules","items"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=u=>C.value=u),label:"Course"},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L),e(s,{class:"mt-5",style:{"text-align":"right"}},{default:a(()=>[e(T,{color:"error",variant:"tonal",class:"mr-2",onClick:A},{default:a(()=>[g("Cancel")]),_:1}),e(T,{type:"submit",color:"primary"},{default:a(()=>[e(le,{start:"",icon:"ph:note-pencil-fill"}),g("Update")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})):ae("",!0),n.editorData!=null?(B(),K(w,{key:1},{default:a(()=>[e(i(Q),{ref_key:"refsubmit",ref:S,onSubmit:W(re,["prevent"])},{default:a(()=>[e(d,null,{default:a(()=>[e(w,null,{default:a(()=>[F("div",he,[F("div",Ue,[e(s,null,{default:a(()=>[e(X,{class:"cursor-pointer",color:"primary",variant:"tonal",style:{width:"200px",height:"200px","margin-top":"-5%","margin-bottom":"3%"}},{default:a(()=>[e(Z,{src:E.value,alt:"Uploaded Image",class:"circle-image"},null,8,["src"])]),_:1})]),_:1})])]),e(d,null,{default:a(()=>[e(s,null,{default:a(()=>[e(ue,{ref_key:"fileInput",ref:m,onChange:$,label:"Select File",accept:".jpg,.jpeg,.png"},null,512)]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:v.value,"onUpdate:modelValue":l[8]||(l[8]=u=>v.value=u),label:"First Name"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{modelValue:D.value,"onUpdate:modelValue":l[9]||(l[9]=u=>D.value=u),label:"Middle Name"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p)],modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=u=>V.value=u),label:"Last Name"},null,8,["rules","modelValue"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":l[11]||(l[11]=u=>_.value=u),rules:[i(p),i(ee)],label:"Email",type:"email",readonly:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(d,null,{default:a(()=>[e(s,{sm:"3.5",md:"3.5",class:"mb-2"},{default:a(()=>[e(c,{rules:[i(p),P,()=>f.value.length<11&&"Invalid Contact Number."],modelValue:f.value,"onUpdate:modelValue":l[12]||(l[12]=u=>f.value=u),label:"Contact Number"},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(L),e(s,{class:"mt-5",style:{"text-align":"right"}},{default:a(()=>[e(T,{color:"error",variant:"tonal",class:"mr-2",onClick:A},{default:a(()=>[g("Cancel")]),_:1}),e(T,{type:"submit",color:"primary"},{default:a(()=>[e(le,{start:"",icon:"ph:note-pencil-fill"}),g("Update")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})):ae("",!0)]),_:1})]),_:1})]),_:1}),e(te,{modelValue:x.value,"onUpdate:modelValue":l[13]||(l[13]=u=>x.value=u),timeout:4e3,color:"success"},{default:a(()=>[g(" Success! Updated your Information. ")]),_:1},8,["modelValue"]),e(te,{modelValue:I.value,"onUpdate:modelValue":l[14]||(l[14]=u=>I.value=u),timeout:4e3,color:"error"},{default:a(()=>[g(" Erorr! Please Check Your Field. ")]),_:1},8,["modelValue"]),e(be,{modelValue:k.value,"onUpdate:modelValue":l[15]||(l[15]=u=>k.value=u),"max-width":"300"},{default:a(()=>[e(ge)]),_:1},8,["modelValue"])])}}});export{xe as _};
