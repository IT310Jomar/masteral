import{d as M,a as r,cA as O,o as H,c as g,e as P,f as e,w as a,z as b,A as w,i as d,y as L,l as W,s as y,j as J,V as G,n as k,aI as K,t as Q,S as X,m as E,p as S,E as Y,b5 as Z,b6 as ee,M as R,W as ae,a3 as h,a9 as A,B as te,C as N,D as T,U as le}from"./main.dc3150f2.js";import{_ as oe}from"./validationApproved.vue_vue_type_script_setup_true_lang.c3297ce7.js";import re from"./reupload.095e99e9.js";import{V as U}from"./vue3-pdf-app.umd.bbeacf02.js";/* empty css             */import"./VFileInput.a98189c2.js";const se={key:0},de={style:{height:"100vh"},class:"mb-5"},ue=M({__name:"[id]",setup(ne){const D=JSON.parse(localStorage.getItem("accessToken")||"{}"),x=r(),m=O(),f=r(),u=r(!1),p=r(!1),n=r();r();const z={sidebar:{viewThumbnail:!0,viewOutline:!1,viewAttachments:!1},secondaryToolbar:{secondaryPresentationMode:!0,secondaryOpenFile:!0,secondaryPrint:!0,secondaryDownload:!0,secondaryViewBookmark:!0,firstPage:!0,lastPage:!0,pageRotateCw:!0,pageRotateCcw:!0,cursorSelectTool:!0,cursorHandTool:!0,scrollVertical:!0,scrollHorizontal:!0,scrollWrapped:!0,spreadNone:!0,spreadOdd:!0,spreadEven:!0,documentProperties:!0},toolbar:{toolbarViewerLeft:{findbar:!0,previous:!0,next:!0,pageNumber:!0},toolbarViewerRight:{presentationMode:!0,openFile:!1,print:!1,download:!0,viewBookmark:!1},toolbarViewerMiddle:{zoomOut:!1,zoomIn:!1,scaleSelectContainer:!0}},errorWrapper:!1},B=()=>{var l;(l=x.value)==null||l.validate().then(({valid:t})=>{t?(u.value=!0,n.value=m.params.id):p.value=!0})},i=r(!1),I=()=>{i.value=!0,n.value=m.params.id},c=r(),q=()=>{N.get(T.API_URL+"auth/admin/get-uploaded-journal/"+m.params.id,{params:{token:D}}).then(l=>{l.data.success&&(c.value=l.data.requestData[0],f.value="/storage/journals/"+l.data.requestData[0].uploaded_file)})},$=r(null),j=async()=>{try{await U.loadPdf(f)}catch(l){$.value=`Error loading PDF: ${l}`}},v=r(),C=r(),F=()=>{N.get(T.API_URL+"auth/admin/get-assigned-editor",{params:{token:D}}).then(l=>{if(l.data.success&&l.data.editor){const o=[];for(var t=0;t<l.data.editor.length;t++){const s=l.data.editor[t];let V=s.firstname;s.middlename&&(V+=` ${s.middlename}`),s.lastname&&(V+=` ${s.lastname}`),o.push({item:V,value:s.id})}C.value=o}})},_=()=>{q(),j(),F()};return H(()=>{_()}),(l,t)=>(g(),P("section",null,[e(S,{title:"Pdf Viewer"},{default:a(()=>[e(b,{link:"",to:"/admin/request/uploaded_journal",class:"d-flex float-right mr-5",style:{"margin-top":"-5%"}},{default:a(()=>[e(w,{size:"large"},{default:a(()=>[d("tabler:arrow-back-up")]),_:1})]),_:1}),e(L,{class:"mt-4"}),e(W,null,{default:a(()=>[e(y(J),{ref_key:"refsubmit",ref:x},{default:a(()=>[e(G,null,{default:a(()=>[e(k,{cols:"4"},{default:a(()=>[e(K,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o),rules:[y(Q)],label:"Please Select Editor",items:C.value,"item-title":"item","item-value":"value"},null,8,["modelValue","rules","items"])]),_:1}),e(X),e(b,{color:"primary",variant:"flat",onClick:B,class:"mr-2"},{default:a(()=>[e(w,{start:"",size:"16",icon:"solar:like-broken"}),d(" Approved")]),_:1}),e(b,{color:"blue",variant:"outlined",onClick:I},{default:a(()=>[e(w,{start:"",size:"16",icon:"tabler:pencil-down"}),d(" Re-Upload ")]),_:1})]),_:1})]),_:1},512),e(E,{class:"mt-2"},{default:a(()=>[e(k,null,{default:a(()=>[e(S,null,{default:a(()=>[c.value?(g(),P("div",se,[c.value.editor_status=="Rejected"?(g(),Y(E,{key:0,class:"py-5 px-5",style:{"margin-bottom":"-3%"}},{default:a(()=>[e(k,{class:"text-center"},{default:a(()=>[e(Z,{color:"warning",variant:"tonal"},{default:a(()=>[e(ee,{class:"mb-1"},{default:a(()=>[d(" Editor Notes: ")]),_:1}),R("span",null,ae(c.value.reasons),1)]),_:1})]),_:1})]),_:1})):h("",!0)])):h("",!0),R("div",de,[e(y(U),{style:{margin:"20px",padding:"10px"},pdf:f.value,config:z},null,8,["pdf"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value=o),scrollable:"","max-width":"540"},{default:a(()=>[e(oe,{row:n.value,editor:v.value,onClose:t[1]||(t[1]=o=>u.value=!1),onHandleData:_},null,8,["row","editor"])]),_:1},8,["modelValue"]),e(A,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value=o),scrollable:"","max-width":"400"},{default:a(()=>[e(re,{row:n.value,onClose:t[3]||(t[3]=o=>i.value=!1),onHandleData:_},null,8,["row"])]),_:1},8,["modelValue"]),e(te,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=o=>p.value=o),timeout:4e3,color:"error"},{default:a(()=>[d(" Erorr! Please Select Editor! ")]),_:1},8,["modelValue"])]))}});const _e=le(ue,[["__scopeId","data-v-798da5b2"]]);export{_e as default};
